{
  "name": "remote_long_scrollback",
  "description": "Long scrollback stress test over WebSocket",
  "initial_cols": 80,
  "initial_rows": 24,
  "steps": [
    {"type": "send", "data": "echo 'SCROLLBACK_START'\n", "delay_ms": 200},
    {"type": "drain"},
    {"type": "send", "data": "seq 1 500\n", "delay_ms": 500, "comment": "Generate 500 lines"},
    {"type": "drain"},
    {"type": "send", "data": "for i in $(seq 1 100); do printf 'Line %04d: %s\\n' \"$i\" \"$(printf 'x%.0s' $(seq 1 60))\"; done\n", "delay_ms": 500, "comment": "100 lines of 60-char padding"},
    {"type": "drain"},
    {"type": "send", "data": "printf '\\033[H\\033[2J'\n", "delay_ms": 100, "comment": "Clear screen"},
    {"type": "send", "data": "echo 'After clear - scrollback should be preserved'\n", "delay_ms": 200},
    {"type": "drain"},
    {"type": "send", "data": "for i in $(seq 1 200); do printf '\\033[38;5;%dm%04d\\033[0m ' \"$((i % 256))\" \"$i\"; done; echo\n", "delay_ms": 500, "comment": "200 colored numbers"},
    {"type": "drain"},
    {"type": "send", "data": "echo 'SCROLLBACK_END'\n", "delay_ms": 200},
    {"type": "drain"}
  ],
  "timeout_s": 60
}
