{"id":"bd-0ty","title":"Epic 4: New Screens","description":"Add Rigs Management screen and Formulas screen for full GT management.","status":"closed","priority":1,"issue_type":"epic","owner":"core@startupfactory.network","created_at":"2026-02-12T08:31:05.362657176+11:00","created_by":"mayor","updated_at":"2026-02-12T08:56:39.659736187+11:00","closed_at":"2026-02-12T08:56:39.659736187+11:00","close_reason":"Formulas screen: duplicate support, geometry preview, updated title/hints"}
{"id":"bd-1hz","title":"Task 1.1: Extract TmuxExecutor trait from client.rs","description":"Extract run/run_ok into TmuxExecutor trait. Real+Mock impls. TmuxClient struct. Keep backward-compat free functions.","status":"closed","priority":1,"issue_type":"task","owner":"core@startupfactory.network","created_at":"2026-02-12T08:27:29.012700954+11:00","created_by":"mayor","updated_at":"2026-02-12T08:35:20.175824024+11:00","closed_at":"2026-02-12T08:35:20.175824024+11:00","close_reason":"TmuxExecutor trait extracted, TmuxClient struct, MockTmuxExecutor, backward-compat free functions. 7 unit tests."}
{"id":"bd-2ce","title":"Task 5.1: GT session lifecycle from TUI","description":"Start rig witness/refinery/crew/polecats from Layout/Formulas screen via run_cli_command.","status":"closed","priority":2,"issue_type":"task","owner":"core@startupfactory.network","created_at":"2026-02-12T08:31:23.357161164+11:00","created_by":"mayor","updated_at":"2026-02-12T08:57:59.101088678+11:00","closed_at":"2026-02-12T08:57:59.101088678+11:00","close_reason":"Session start/stop from Formulas screen, live status via 10s polling, instant refresh after actions"}
{"id":"bd-3np","title":"Digest: mol-witness-patrol","description":"Patrol 5: Rig idle. No polecats, no MRs, refinery running, deacon stopped, inbox clean.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-12T08:50:03.934394012+11:00","updated_at":"2026-02-12T08:50:03.934394012+11:00","closed_at":"2026-02-12T08:50:03.934274329+11:00","close_reason":"Squashed from 10 wisps","dependencies":[{"issue_id":"bd-3np","depends_on_id":"bd-wisp-oow","type":"parent-child","created_at":"2026-02-12T08:50:03.936274182+11:00","created_by":"frankentui/witness"}]}
{"id":"bd-3v1","title":"Epic 2: Layout System Overhaul","description":"Layouts are pure geometry. Users assign sessions via gtui. Fix do_apply_layout.","status":"closed","priority":1,"issue_type":"epic","owner":"core@startupfactory.network","created_at":"2026-02-12T08:30:39.088970829+11:00","created_by":"mayor","updated_at":"2026-02-12T08:54:53.352228229+11:00","closed_at":"2026-02-12T08:54:53.352228229+11:00","close_reason":"All sub-tasks complete"}
{"id":"bd-4j6","title":"Task 1.4: Write test suite for tmux foundation","description":"Unit tests for YAML parser (3 schemas), pane_control state machine, model tree, client parsing with MockTmuxExecutor.","status":"closed","priority":2,"issue_type":"task","owner":"core@startupfactory.network","created_at":"2026-02-12T08:27:29.809482421+11:00","created_by":"mayor","updated_at":"2026-02-12T08:40:30.597085681+11:00","closed_at":"2026-02-12T08:40:30.597085681+11:00","close_reason":"18 unit tests: 7 for tmux client/mock, 10 for YAML parser, 1 for model. All passing."}
{"id":"bd-4ji","title":"Epic 5: GT Session Integration","description":"Layout/Formulas screen can start/stop GT-managed sessions directly.","status":"closed","priority":2,"issue_type":"epic","owner":"core@startupfactory.network","created_at":"2026-02-12T08:31:19.889574061+11:00","created_by":"mayor","updated_at":"2026-02-12T08:57:59.128746288+11:00","closed_at":"2026-02-12T08:57:59.128746288+11:00","close_reason":"Session start/stop from Formulas screen, live status via 10s polling, instant refresh after actions"}
{"id":"bd-5nv","title":"Task 1.3: Delete tmux_pane.rs dead code","description":"Delete src/tmux_pane.rs - duplicate of tmux/pane_control.rs, never imported.","status":"closed","priority":0,"issue_type":"task","owner":"core@startupfactory.network","created_at":"2026-02-12T08:27:29.524505011+11:00","created_by":"mayor","updated_at":"2026-02-12T08:28:19.561017375+11:00","closed_at":"2026-02-12T08:28:19.561017375+11:00","close_reason":"Deleted dead tmux_pane.rs"}
{"id":"bd-5on","title":"Task 4.1: Rigs Management Screen","description":"Show all rigs with status, actions: start witness/refinery, start crew, sling work. List+detail layout.","status":"closed","priority":1,"issue_type":"task","owner":"core@startupfactory.network","created_at":"2026-02-12T08:31:08.830656318+11:00","created_by":"mayor","updated_at":"2026-02-12T08:41:04.287094711+11:00","closed_at":"2026-02-12T08:41:04.287094711+11:00","close_reason":"Rigs screen implemented: rig list with status indicators (W/R/polecats/crew), detail panel with agents, actions (start witness/refinery, view agents/beads), quick keys w/f/b/a."}
{"id":"bd-76b","title":"Task 2.1: Redesign layout model — layouts as pure geometry","description":"New Layout/LayoutSlot structs. No session refs in YAML. Update layout_manager.rs.","status":"closed","priority":1,"issue_type":"task","owner":"core@startupfactory.network","created_at":"2026-02-12T08:30:43.250465206+11:00","created_by":"mayor","updated_at":"2026-02-12T08:49:26.364065403+11:00","closed_at":"2026-02-12T08:49:26.364065403+11:00","close_reason":"Layout model redesigned, do_apply_layout fixed with nesting detection and proper window tracking"}
{"id":"bd-7cu","title":"Epic 6: Integration Tests","description":"End-to-end tests verifying all screens, palette, layouts, tmux integration.","status":"closed","priority":3,"issue_type":"epic","owner":"core@startupfactory.network","created_at":"2026-02-12T08:31:30.556975495+11:00","created_by":"mayor","updated_at":"2026-02-12T08:58:37.430896898+11:00","closed_at":"2026-02-12T08:58:37.430896898+11:00","close_reason":"All v3 tasks complete: 25 unit tests, 6 epics implemented"}
{"id":"bd-7xv","title":"Task 4.2: Formulas Screen","description":"CRUD for tmuxrs layout configs. Preview with ASCII art. Apply formula with session slot assignment.","status":"closed","priority":1,"issue_type":"task","owner":"core@startupfactory.network","created_at":"2026-02-12T08:31:12.182631768+11:00","created_by":"mayor","updated_at":"2026-02-12T08:56:39.646348823+11:00","closed_at":"2026-02-12T08:56:39.646348823+11:00","close_reason":"Formulas screen: duplicate support, geometry preview, updated title/hints"}
{"id":"bd-830","title":"Digest: mol-witness-patrol","description":"Patrol 4: Rig idle. No polecats, no MRs, refinery running, deacon stopped, inbox clean.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-12T08:47:35.777075329+11:00","updated_at":"2026-02-12T08:47:35.777075329+11:00","closed_at":"2026-02-12T08:47:35.77697792+11:00","close_reason":"Squashed from 10 wisps","dependencies":[{"issue_id":"bd-830","depends_on_id":"bd-wisp-jvt","type":"parent-child","created_at":"2026-02-12T08:47:35.778199348+11:00","created_by":"frankentui/witness"}]}
{"id":"bd-87m","title":"GT-TUI v3: Full-Featured Gas Town Management TUI","description":"Make gt-tui a full-featured way to manage Gas Town. 6 epics: Foundation, Layouts, Palette, Screens, GT Sessions, Integration Tests.","status":"closed","priority":1,"issue_type":"epic","owner":"core@startupfactory.network","created_at":"2026-02-12T08:27:19.659138251+11:00","created_by":"mayor","updated_at":"2026-02-12T08:58:37.443610178+11:00","closed_at":"2026-02-12T08:58:37.443610178+11:00","close_reason":"All v3 tasks complete: 25 unit tests, 6 epics implemented"}
{"id":"bd-8cw","title":"Rigs screen: wire up real gt commands for all actions","status":"closed","priority":2,"issue_type":"task","owner":"core@startupfactory.network","created_at":"2026-02-12T09:00:10.992579602+11:00","created_by":"mayor","updated_at":"2026-02-12T09:04:00.699365675+11:00","closed_at":"2026-02-12T09:04:00.699365675+11:00","close_reason":"Expanded Rigs screen: 9 action kinds (start/stop witness, start/stop refinery, start all crew, list polecats, nuke all polecats, view agents, view beads), quick keys w/r/c/p/b/a, contextual start/stop based on running state"}
{"id":"bd-9os","title":"Epic 1: Testable Tmux Foundation","description":"Extract TmuxExecutor trait, rewrite YAML parser, delete dead code, write test suite. Foundation for all other epics.","status":"closed","priority":1,"issue_type":"epic","owner":"core@startupfactory.network","created_at":"2026-02-12T08:27:28.739849178+11:00","created_by":"mayor","updated_at":"2026-02-12T08:40:43.57258892+11:00","closed_at":"2026-02-12T08:40:43.57258892+11:00","close_reason":"Epic 1 complete: TmuxExecutor trait, YAML parser rewrite, dead code deleted, test suite."}
{"id":"bd-9wc","title":"Digest: mol-witness-patrol","description":"Patrol 2: Rig idle. No polecats, no MRs, refinery running, deacon stopped, inbox clean.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-12T08:44:10.751319148+11:00","updated_at":"2026-02-12T08:44:10.751319148+11:00","closed_at":"2026-02-12T08:44:10.751062991+11:00","close_reason":"Squashed from 10 wisps"}
{"id":"bd-bbx","title":"Digest: mol-witness-patrol","description":"Patrol 2: quiet rig. No polecats, no queue, no mail, refinery running, deacon alive. Idle backoff.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-12T07:41:10.261309128+11:00","updated_at":"2026-02-12T07:41:10.261309128+11:00","closed_at":"2026-02-12T07:41:10.261180928+11:00","close_reason":"Squashed from 10 wisps","dependencies":[{"issue_id":"bd-bbx","depends_on_id":"bd-wisp-d0b","type":"parent-child","created_at":"2026-02-12T07:41:10.262732191+11:00","created_by":"frankentui/witness"}]}
{"id":"bd-bzn","title":"Digest: mol-witness-patrol","description":"Patrol 6: Rig idle. No polecats, no MRs, refinery running, deacon stopped, inbox clean.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-12T08:52:55.030967504+11:00","updated_at":"2026-02-12T08:52:55.030967504+11:00","closed_at":"2026-02-12T08:52:55.030877773+11:00","close_reason":"Squashed from 10 wisps","dependencies":[{"issue_id":"bd-bzn","depends_on_id":"bd-wisp-yxc","type":"parent-child","created_at":"2026-02-12T08:52:55.032214539+11:00","created_by":"frankentui/witness"}]}
{"id":"bd-c47","title":"Task 2.2: Fix do_apply_layout — proper link-window usage","description":"Fix hardcoded window indices, use link-window not nested attach, nesting detection, error handling.","status":"closed","priority":1,"issue_type":"task","owner":"core@startupfactory.network","created_at":"2026-02-12T08:30:47.177249971+11:00","created_by":"mayor","updated_at":"2026-02-12T08:49:26.376863033+11:00","closed_at":"2026-02-12T08:49:26.376863033+11:00","close_reason":"Layout model redesigned, do_apply_layout fixed with nesting detection and proper window tracking"}
{"id":"bd-duz","title":"Task 6.1: Screen rendering snapshot tests","description":"Snapshot tests for ALL screens at 80x24 and 120x40. Mock data fixtures. Empty/loaded/error states.","status":"closed","priority":3,"issue_type":"task","owner":"core@startupfactory.network","created_at":"2026-02-12T08:31:34.22245479+11:00","created_by":"mayor","updated_at":"2026-02-12T08:58:37.404269536+11:00","closed_at":"2026-02-12T08:58:37.404269536+11:00","close_reason":"All v3 tasks complete: 25 unit tests, 6 epics implemented"}
{"id":"bd-frankentui-refinery","title":"Refinery for frankentui - processes merge queue.","description":"Refinery for frankentui - processes merge queue.\n\nrole_type: refinery\nrig: frankentui\nagent_state: idle\nhook_bead: null\ncleanup_status: null\nactive_mr: null\nnotification_level: null","status":"open","priority":2,"issue_type":"agent","owner":"core@startupfactory.network","created_at":"2026-02-06T07:13:52.355826021+11:00","created_by":"mayor","updated_at":"2026-02-06T07:13:52.355826021+11:00","labels":["gt:agent"]}
{"id":"bd-frankentui-witness","title":"Witness for frankentui - monitors polecat health and progress.","description":"Witness for frankentui - monitors polecat health and progress.\n\nrole_type: witness\nrig: frankentui\nagent_state: idle\nhook_bead: null\ncleanup_status: null\nactive_mr: null\nnotification_level: null","status":"open","priority":2,"issue_type":"agent","owner":"core@startupfactory.network","created_at":"2026-02-06T07:13:51.416760126+11:00","created_by":"mayor","updated_at":"2026-02-12T08:52:30.566510556+11:00","labels":["gt:agent"],"hook_bead":"bd-wisp-yxc"}
{"id":"bd-fsl","title":"Task 4.3: Screen keybind reorganization","description":"Add Rigs (F7), rename Formulas (F9). Reorg F1-F10 mappings. Update screen.rs, app.rs.","status":"closed","priority":2,"issue_type":"task","owner":"core@startupfactory.network","created_at":"2026-02-12T08:31:15.621699345+11:00","created_by":"mayor","updated_at":"2026-02-12T08:40:16.290793164+11:00","closed_at":"2026-02-12T08:40:16.290793164+11:00","close_reason":"Screen keybinds reorganized: F1-F10 with Rigs at F7, Formulas at F9, Docs at F10/0. Number key 0 maps to Docs."}
{"id":"bd-h0k","title":"Digest: mol-witness-patrol","description":"Patrol 3: Rig idle. No polecats, no MRs, refinery running, deacon stopped, inbox clean.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-12T08:45:41.273894408+11:00","updated_at":"2026-02-12T08:45:41.273894408+11:00","closed_at":"2026-02-12T08:45:41.273737326+11:00","close_reason":"Squashed from 10 wisps","dependencies":[{"issue_id":"bd-h0k","depends_on_id":"bd-wisp-8wy","type":"parent-child","created_at":"2026-02-12T08:45:41.276995096+11:00","created_by":"frankentui/witness"}]}
{"id":"bd-hnh","title":"Dashboard event feed: integrate real gt events instead of demo data","status":"closed","priority":2,"issue_type":"task","owner":"core@startupfactory.network","created_at":"2026-02-12T09:00:11.117196071+11:00","created_by":"mayor","updated_at":"2026-02-12T09:06:11.852948854+11:00","closed_at":"2026-02-12T09:06:11.852948854+11:00","close_reason":"Added status_delta_events() — compares old vs new TownStatus on each StatusRefresh and generates events for: rig appeared/removed, witness/refinery start/stop, polecat spawn/nuke, crew count changes, agent online/offline, new mail. Events flow into both Dashboard event feed and EventFeed screen."}
{"id":"bd-jr7","title":"Mail inbox: integrate real gt mail data instead of demo","status":"closed","priority":2,"issue_type":"task","owner":"core@startupfactory.network","created_at":"2026-02-12T09:00:11.233668791+11:00","created_by":"mayor","updated_at":"2026-02-12T09:08:49.471835793+11:00","closed_at":"2026-02-12T09:08:49.471835793+11:00","close_reason":"Replaced demo data with real gt mail inbox --json. Added MailMessage type + fetch_mail() + MailPoller (30s interval). Mail screen: set_messages() preserves selection by ID, mark-read fires gt mail mark-read async, shows From/To/ID/timestamp from real data."}
{"id":"bd-ju4","title":"Digest: mol-witness-patrol","description":"Patrol 1: inbox empty, no cleanups, refinery running (queue empty), no polecats, no timer gates, no swarms, deacon alive (hq-deacon), inbox clean. Quiet rig.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-12T07:40:14.996156221+11:00","updated_at":"2026-02-12T07:40:14.996156221+11:00","closed_at":"2026-02-12T07:40:14.996025697+11:00","close_reason":"Squashed from 10 wisps","dependencies":[{"issue_id":"bd-ju4","depends_on_id":"bd-wisp-086","type":"parent-child","created_at":"2026-02-12T07:40:14.999022576+11:00","created_by":"frankentui/witness"}]}
{"id":"bd-mpe","title":"Agent Detail: wire up real gt commands for nudge/mail actions","status":"closed","priority":1,"issue_type":"task","owner":"core@startupfactory.network","created_at":"2026-02-12T09:10:07.510471126+11:00","created_by":"mayor","updated_at":"2026-02-12T09:12:32.386512056+11:00","closed_at":"2026-02-12T09:12:32.386512056+11:00","close_reason":"Wired up all Agent Detail actions: [n]udge runs gt nudge \u003caddr\u003e, [m]ail runs gt mail send \u003caddr\u003e, [p]eek calls tmux_pane.peek_session(), [a]ttach/Enter calls tmux_pane.link_session(). All commands execute async via Cmd::Task and show feedback."}
{"id":"bd-ooa","title":"Task 6.2: Full integration tests with mock tmux","description":"Test complete flows: palette command execution, layout apply, tmux tree navigation, rig management.","status":"closed","priority":3,"issue_type":"task","owner":"core@startupfactory.network","created_at":"2026-02-12T08:31:37.63083314+11:00","created_by":"mayor","updated_at":"2026-02-12T08:58:37.417233312+11:00","closed_at":"2026-02-12T08:58:37.417233312+11:00","close_reason":"All v3 tasks complete: 25 unit tests, 6 epics implemented"}
{"id":"bd-rig-frankentui","title":"frankentui","description":"Rig identity bead for frankentui.\n\nrepo: https://github.com/Dicklesworthstone/frankentui.git\nprefix: bd\nstate: active","status":"open","priority":2,"issue_type":"task","owner":"core@startupfactory.network","created_at":"2026-02-06T07:13:53.587398457+11:00","created_by":"mayor","updated_at":"2026-02-06T07:13:53.587398457+11:00","labels":["gt:rig"]}
{"id":"bd-rmd","title":"Task 2.3: Layout system tests","description":"YAML test configs, mock do_apply_layout, session assignment cycling, nesting detection, error paths.","status":"closed","priority":2,"issue_type":"task","owner":"core@startupfactory.network","created_at":"2026-02-12T08:30:50.867014227+11:00","created_by":"mayor","updated_at":"2026-02-12T08:58:37.393019174+11:00","closed_at":"2026-02-12T08:58:37.393019174+11:00","close_reason":"All v3 tasks complete: 25 unit tests, 6 epics implemented"}
{"id":"bd-szo","title":"Task 5.2: Live session status in layouts","description":"Layout slots show real-time status (green/red/yellow). Poll via tmux has-session or gt status.","status":"closed","priority":2,"issue_type":"task","owner":"core@startupfactory.network","created_at":"2026-02-12T08:31:27.10824639+11:00","created_by":"mayor","updated_at":"2026-02-12T08:57:59.115914182+11:00","closed_at":"2026-02-12T08:57:59.115914182+11:00","close_reason":"Session start/stop from Formulas screen, live status via 10s polling, instant refresh after actions"}
{"id":"bd-tdp","title":"Task 1.2: Rewrite tmuxrs YAML parser","description":"Handle all 3 YAML schemas: name/layout/panes, window:cmd, window:{panes:[mixed]}. New PaneConfig struct.","status":"closed","priority":1,"issue_type":"task","owner":"core@startupfactory.network","created_at":"2026-02-12T08:27:29.2502264+11:00","created_by":"mayor","updated_at":"2026-02-12T08:35:32.770662833+11:00","closed_at":"2026-02-12T08:35:32.770662833+11:00","close_reason":"YAML parser rewritten: handles all 3 schemas (named, shorthand, structured panes). PaneConfig model. 10 unit tests."}
{"id":"bd-tg6","title":"Epic 3: Command Palette with Parameters","description":"Commands in palette support typed arguments so gt commands work with params from palette.","status":"closed","priority":1,"issue_type":"epic","owner":"core@startupfactory.network","created_at":"2026-02-12T08:30:54.923587637+11:00","created_by":"mayor","updated_at":"2026-02-12T08:54:53.33871476+11:00","closed_at":"2026-02-12T08:54:53.33871476+11:00","close_reason":"All sub-tasks complete"}
{"id":"bd-uji","title":"Digest: mol-witness-patrol","description":"Patrol 1: Rig idle. No polecats, no MRs, refinery running, deacon stopped, inbox clean.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-12T08:42:49.112832529+11:00","updated_at":"2026-02-12T08:42:49.112832529+11:00","closed_at":"2026-02-12T08:42:49.112575582+11:00","close_reason":"Squashed from 10 wisps"}
{"id":"bd-wisp-05q","title":"mol-witness-patrol","description":"Per-rig worker monitor patrol loop.\n\nThe Witness is the Pit Boss for your rig. You watch polecats, nudge them toward\ncompletion, verify clean git state before kills, and escalate stuck workers.\n\n**You do NOT do implementation work.** Your job is oversight, not coding.\n\n## Ephemeral Polecat Model\n\nPolecats are truly ephemeral - done at MR submission, recyclable immediately:\n\n```\nPolecat lifecycle: spawning → working → mr_submitted → nuked\nMR lifecycle:      created → queued → processed → merged (Refinery handles)\n```\n\nOnce a polecat's branch is pushed (cleanup_status=clean), the polecat can be\nnuked immediately. The MR continues independently in the Refinery. If conflicts\narise, Refinery creates a NEW conflict-resolution task for a NEW polecat.\n\n**Key principle**: Polecat lifecycle is separate from MR lifecycle.\n\n## Design Philosophy\n\nThis patrol follows Gas Town principles:\n- **Discovery over tracking**: Observe reality each cycle, don't maintain state\n- **Events over state**: POLECAT_DONE mail triggers immediate cleanup\n- **Ephemeral by default**: Clean polecats are nuked immediately, no waiting\n- **Cleanup wisps for exceptions**: Only created when intervention needed\n- **Task tool for parallelism**: Subagents inspect polecats, not molecule arms\n\n## Patrol Shape (Linear, Deacon-style)\n\n```\ninbox-check ─► process-cleanups ─► check-refinery ─► survey-workers\n                                                            │\n         ┌──────────────────────────────────────────────────┘\n         ▼\n  check-timer-gates ─► check-swarm ─► ping-deacon ─► patrol-cleanup ─► context-check ─► loop-or-exit\n```\n\nNo dynamic arms. No fanout gates. No persistent nudge counters.\nState is discovered each cycle from reality (tmux, beads, mail).","status":"open","priority":2,"issue_type":"epic","created_at":"2026-02-06T23:36:29.543038606+11:00","updated_at":"2026-02-06T23:36:29.543038678+11:00","ephemeral":true}
{"id":"bd-wisp-086","title":"mol-witness-patrol","description":"Per-rig worker monitor patrol loop.\n\nThe Witness is the Pit Boss for your rig. You watch polecats, nudge them toward\ncompletion, verify clean git state before kills, and escalate stuck workers.\n\n**You do NOT do implementation work.** Your job is oversight, not coding.\n\n## Ephemeral Polecat Model\n\nPolecats are truly ephemeral - done at MR submission, recyclable immediately:\n\n```\nPolecat lifecycle: spawning → working → mr_submitted → nuked\nMR lifecycle:      created → queued → processed → merged (Refinery handles)\n```\n\nOnce a polecat's branch is pushed (cleanup_status=clean), the polecat can be\nnuked immediately. The MR continues independently in the Refinery. If conflicts\narise, Refinery creates a NEW conflict-resolution task for a NEW polecat.\n\n**Key principle**: Polecat lifecycle is separate from MR lifecycle.\n\n## Design Philosophy\n\nThis patrol follows Gas Town principles:\n- **Discovery over tracking**: Observe reality each cycle, don't maintain state\n- **Events over state**: POLECAT_DONE mail triggers immediate cleanup\n- **Ephemeral by default**: Clean polecats are nuked immediately, no waiting\n- **Cleanup wisps for exceptions**: Only created when intervention needed\n- **Task tool for parallelism**: Subagents inspect polecats, not molecule arms\n\n## Patrol Shape (Linear, Deacon-style)\n\n```\ninbox-check ─► process-cleanups ─► check-refinery ─► survey-workers\n                                                            │\n         ┌──────────────────────────────────────────────────┘\n         ▼\n  check-timer-gates ─► check-swarm ─► ping-deacon ─► patrol-cleanup ─► context-check ─► loop-or-exit\n```\n\nNo dynamic arms. No fanout gates. No persistent nudge counters.\nState is discovered each cycle from reality (tmux, beads, mail).","status":"hooked","priority":2,"issue_type":"epic","assignee":"frankentui/witness","created_at":"2026-02-12T07:36:35.17028155+11:00","updated_at":"2026-02-12T07:36:35.56045538+11:00","ephemeral":true}
{"id":"bd-wisp-0rq","title":"Check timer gates for expiration","description":"Check for expired timer gates and escalate as needed.\n\nTimer gates are async wait conditions with a timeout. When the timeout expires,\nthe gate should be escalated to the overseer for human intervention.\n\n**Step 1: Run timer gate check**\n```bash\nbd gate check --type=timer --escalate\n```\n\nThis command:\n1. Finds all open gate issues with await_type=timer\n2. Checks if `now \u003e created_at + timeout`\n3. Escalates expired gates via `gt escalate` (HIGH severity)\n4. Reports summary of gate status\n\n**Step 2: Review output**\n\nIf expired gates were found and escalated:\n- The escalation creates an audit trail bead\n- Overseer will be notified via mail\n- Gate remains open until manually resolved\n\nIf no expired gates:\n- Continue patrol normally\n\n**Note**: Timer gates do NOT auto-close on expiration. They escalate.\nThis ensures human oversight of timeout conditions.\n\n**Parallelism**: This is a single command, no parallel execution needed.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-06T23:36:29.563571753+11:00","updated_at":"2026-02-06T23:36:29.563571825+11:00","dependencies":[{"issue_id":"bd-wisp-0rq","depends_on_id":"bd-wisp-05q","type":"parent-child","created_at":"2026-02-06T23:36:29.651075648+11:00","created_by":"witness"},{"issue_id":"bd-wisp-0rq","depends_on_id":"bd-wisp-fs4","type":"blocks","created_at":"2026-02-06T23:36:29.744047083+11:00","created_by":"witness"}],"ephemeral":true}
{"id":"bd-wisp-0uy","title":"Ping Deacon for health check","description":"Send WITNESS_PING to Deacon for second-order monitoring.\n\nThe Witness fleet collectively monitors Deacon health - this prevents the\n\"who watches the watchers\" problem. If Deacon dies, Witnesses detect it.\n\n**Step 1: Send ping**\n```bash\ngt mail send deacon/ -s \"WITNESS_PING \u003crig\u003e\" -m \"Rig: \u003crig\u003e\nTimestamp: $(date -u +%Y-%m-%dT%H:%M:%SZ)\nPatrol: \u003ccycle-number\u003e\"\n```\n\n**Step 2: Check Deacon health**\n```bash\n# Check Deacon agent bead for last_activity\nbd list --type=agent --json | jq '.[] | select(.description | contains(\"deacon\"))'\n```\n\nLook at the `last_activity` timestamp. If stale (\u003e5 minutes since last update):\n- Deacon may be dead or stuck\n\n**Step 3: Escalate if needed**\n```bash\n# If Deacon appears down\ngt mail send mayor/ -s \"ALERT: Deacon appears unresponsive\" -m \"No Deacon activity for \u003e5 minutes.\nLast seen: \u003ctimestamp\u003e\nWitness: \u003crig\u003e/witness\"\n```\n\nNote: Multiple Witnesses may send this alert. Mayor should handle deduplication.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-12T08:52:15.911891595+11:00","updated_at":"2026-02-12T08:52:15.911891695+11:00","dependencies":[{"issue_id":"bd-wisp-0uy","depends_on_id":"bd-wisp-imu","type":"parent-child","created_at":"2026-02-12T08:52:15.938897809+11:00","created_by":"frankentui/witness"},{"issue_id":"bd-wisp-0uy","depends_on_id":"bd-wisp-8q6","type":"blocks","created_at":"2026-02-12T08:52:15.970443513+11:00","created_by":"frankentui/witness"}],"ephemeral":true}
{"id":"bd-wisp-1n3","title":"Run test suite","description":"**Config: run_tests = true**\n**Config: test_command = cargo test -p ftui-demo-showcase**\n\nIf run_tests = \"false\": Skip this step entirely. Proceed to handle-failures.\n\nIf run_tests = \"true\":\nRun the test suite:\n\n```bash\ncargo test -p ftui-demo-showcase\n```\n\nTrack results: pass count, fail count, specific failures.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-12T07:37:40.376906434+11:00","updated_at":"2026-02-12T07:39:00.295556084+11:00","closed_at":"2026-02-12T07:39:00.295556084+11:00","close_reason":"Closed","dependencies":[{"issue_id":"bd-wisp-1n3","depends_on_id":"bd-wisp-j5h","type":"parent-child","created_at":"2026-02-12T07:37:40.395410888+11:00","created_by":"refinery"},{"issue_id":"bd-wisp-1n3","depends_on_id":"bd-wisp-id0","type":"blocks","created_at":"2026-02-12T07:37:40.426323337+11:00","created_by":"refinery"}],"ephemeral":true}
{"id":"bd-wisp-3h2","title":"Scan merge queue","description":"Check the beads merge queue - this is the SOURCE OF TRUTH for pending merges.\n\n```bash\ngit fetch --prune origin\ngt mq list \u003crig\u003e\n```\n\nThe beads MQ tracks all pending merge requests. Do NOT rely on `git branch -r | grep polecat`\nas branches may exist without MR beads, or MR beads may exist for already-merged work.\n\nIf queue empty, skip to \"check-integration-branches\" step.\n\nFor each MR in the queue, verify the branch still exists:\n```bash\ngit branch -r | grep \u003cbranch\u003e\n```\n\nIf branch doesn't exist for a queued MR:\n- Close the MR bead: `bd close \u003cmr-id\u003e --reason \"Branch no longer exists\"`\n- Remove from processing queue\n\nTrack verified MR list for this cycle.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-12T07:37:40.375289488+11:00","updated_at":"2026-02-12T07:38:29.074553677+11:00","closed_at":"2026-02-12T07:38:29.074553677+11:00","close_reason":"Closed","dependencies":[{"issue_id":"bd-wisp-3h2","depends_on_id":"bd-wisp-j5h","type":"parent-child","created_at":"2026-02-12T07:37:40.388917238+11:00","created_by":"refinery"},{"issue_id":"bd-wisp-3h2","depends_on_id":"bd-wisp-bvj","type":"blocks","created_at":"2026-02-12T07:37:40.421877646+11:00","created_by":"refinery"}],"ephemeral":true}
{"id":"bd-wisp-4gv","title":"Merge and push to main","description":"Merge and push. CRITICAL: Notifications come IMMEDIATELY after push.\n\n**Config: integration_branch_refinery_enabled = true**\n**Config: target_branch = main**\n**Config: delete_merged_branches = true**\n\nWhen integration_branch_refinery_enabled = \"true\", the MR's target branch\nmay be an integration branch (not just main). Check the MR's target field and use\nthat as the merge destination. Only fall back to main if no explicit target is set.\n\n**Step 1: Merge and Push**\nDetermine the merge target: use the MR's target field if set, otherwise main.\n```bash\ngit checkout \u003cmerge-target\u003e\ngit merge --ff-only temp\ngit push origin \u003cmerge-target\u003e\n```\n\n⚠️ **STOP HERE - DO NOT PROCEED UNTIL STEPS 2-3 COMPLETE**\n\n**Step 2: Send MERGED Notification (REQUIRED - DO THIS IMMEDIATELY)**\n\nRIGHT NOW, before any cleanup, send MERGED mail to Witness:\n\n```bash\ngt mail send \u003crig\u003e/witness -s \"MERGED \u003cpolecat-name\u003e\" -m \"Branch: \u003cbranch\u003e\nIssue: \u003cissue-id\u003e\nMerged-At: $(date -u +%Y-%m-%dT%H:%M:%SZ)\"\n```\n\nThis signals the Witness to nuke the polecat worktree. WITHOUT THIS NOTIFICATION,\nPOLECAT WORKTREES ACCUMULATE INDEFINITELY AND THE LIFECYCLE BREAKS.\n\n**Step 3: Close MR Bead (REQUIRED - DO THIS IMMEDIATELY)**\n\n⚠️ **VERIFICATION BEFORE CLOSING**: Confirm the work is actually on main:\n```bash\n# Get the commit message/issue from the branch\ngit log origin/main --oneline | grep \"\u003cissue-id\u003e\"\n# OR verify the commit SHA is on main:\ngit branch --contains \u003ccommit-sha\u003e | grep main\n```\n\nIf work is NOT on main, DO NOT close the MR bead. Investigate first.\n\n```bash\nbd close \u003cmr-bead-id\u003e --reason \"Merged to main at $(git rev-parse --short HEAD)\"\n```\n\nThe MR bead ID was in the MERGE_READY message or find via:\n```bash\nbd list --type=merge-request --status=open | grep \u003cpolecat-name\u003e\n```\n\n**VALIDATION**: The MR bead's source_issue should be a valid bead ID (gt-xxxxx),\nnot a branch name. If source_issue contains a branch name, flag for investigation.\n\n**Step 4: Archive the MERGE_READY mail (REQUIRED)**\n```bash\ngt mail archive \u003cmerge-ready-message-id\u003e\n```\nThe message ID was tracked when you processed inbox-check.\n\n**Step 5: Cleanup (only after Steps 2-4 confirmed)**\n```bash\ngit branch -d temp\n```\n\ndelete_merged_branches (see config above) controls whether to delete the remote source branch.\n\nIf delete_merged_branches is \"true\":\n```bash\ngit push origin --delete \u003cpolecat-branch\u003e\n```\n\nIf delete_merged_branches is \"false\": Leave the remote branch intact.\n\n**VERIFICATION GATE**: You CANNOT proceed to loop-check without:\n- [x] MERGED mail sent to witness\n- [x] MR bead closed\n- [x] MERGE_READY mail archived\n\nIf you skipped notifications or archiving, GO BACK AND DO THEM NOW.\n\nMain has moved. Any remaining branches need rebasing on new baseline.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-12T07:37:40.378506937+11:00","updated_at":"2026-02-12T07:39:00.812028424+11:00","closed_at":"2026-02-12T07:39:00.812028424+11:00","close_reason":"Closed","dependencies":[{"issue_id":"bd-wisp-4gv","depends_on_id":"bd-wisp-j5h","type":"parent-child","created_at":"2026-02-12T07:37:40.401580745+11:00","created_by":"refinery"},{"issue_id":"bd-wisp-4gv","depends_on_id":"bd-wisp-6q2","type":"blocks","created_at":"2026-02-12T07:37:40.431980825+11:00","created_by":"refinery"}],"ephemeral":true}
{"id":"bd-wisp-5i0","title":"Check integration branches for landing","description":"**Config: integration_branch_refinery_enabled = true**\n**Config: integration_branch_auto_land = false**\n\nRead the two config values above, then:\n\n- If integration_branch_refinery_enabled = \"false\": Say \"Integration branches disabled.\" Close step.\n- If integration_branch_auto_land = \"false\": Say \"Auto-land disabled, nothing to do.\" Close step.\n- If BOTH are \"true\":\n  1. `bd list --type=epic --status=open` to find epics\n  2. `gt mq integration status \u003cepic-id\u003e` for each epic\n  3. If `ready_to_land: true`: run `gt mq integration land \u003cepic-id\u003e`\n  4. If `ready_to_land: false`: do nothing, epic work is incomplete\n  Never land partial epics — ALL children must be closed first.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-12T07:37:40.380838414+11:00","updated_at":"2026-02-12T07:37:40.380838484+11:00","dependencies":[{"issue_id":"bd-wisp-5i0","depends_on_id":"bd-wisp-j5h","type":"parent-child","created_at":"2026-02-12T07:37:40.412162881+11:00","created_by":"refinery"},{"issue_id":"bd-wisp-5i0","depends_on_id":"bd-wisp-he0","type":"blocks","created_at":"2026-02-12T07:37:40.440855432+11:00","created_by":"refinery"}],"ephemeral":true}
{"id":"bd-wisp-6q2","title":"Handle test failures","description":"**VERIFICATION GATE**: This step enforces the Beads Promise.\n\nIf tests PASSED: This step auto-completes. Proceed to merge.\n\nIf tests FAILED:\n1. Diagnose: Is this a branch regression or pre-existing on main?\n2. If branch caused it:\n   - Abort merge\n   - Notify polecat: \"Tests failing. Please fix and resubmit.\"\n   - Skip to loop-check\n3. If pre-existing on main:\n   - File a bead: bd create --type=bug --priority=1 --title=\"...\"\n   - FORBIDDEN: Writing code to fix test failures. You merge branches, you do not develop.\n   - Proceed with the merge if the failure is pre-existing (not caused by the branch).\n\n**GATE REQUIREMENT**: You CANNOT proceed to merge-push without:\n- Tests passing, OR\n- Bead filed for the pre-existing failure\n\nFORBIDDEN: Writing application code, exploring polecat implementations, or\nre-implementing fixes. You are a mechanical merge processor.\n\nThis is non-negotiable. Never disavow. Never \"note and proceed.\" ","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-12T07:37:40.377710355+11:00","updated_at":"2026-02-12T07:39:00.539030254+11:00","closed_at":"2026-02-12T07:39:00.539030254+11:00","close_reason":"Closed","dependencies":[{"issue_id":"bd-wisp-6q2","depends_on_id":"bd-wisp-j5h","type":"parent-child","created_at":"2026-02-12T07:37:40.39916104+11:00","created_by":"refinery"},{"issue_id":"bd-wisp-6q2","depends_on_id":"bd-wisp-1n3","type":"blocks","created_at":"2026-02-12T07:37:40.429339435+11:00","created_by":"refinery"}],"ephemeral":true}
{"id":"bd-wisp-6z8","title":"Loop or exit for respawn","description":"End of patrol cycle decision.\n\n**If context LOW** (can continue patrolling):\n1. Generate a brief summary of this patrol cycle\n2. Squash the current wisp:\n```bash\nbd mol squash \u003cmol-id\u003e --summary \"\u003cpatrol-summary\u003e\"\n```\n3. Create a new patrol wisp:\n```bash\nbd mol wisp mol-witness-patrol\n```\n4. Continue executing from the inbox-check step of the new wisp\n\n**If context HIGH** (approaching limit):\n1. Write handoff mail with notable observations:\n```bash\ngt handoff -s \"Witness patrol handoff\" -m \"\u003cobservations\u003e\"\n```\n2. Exit cleanly - the daemon will respawn a fresh Witness session\n\n**IMPORTANT**: You must either create a new wisp (context LOW) or exit (context HIGH).\nNever leave the session idle without work on your hook.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-12T08:52:15.91466056+11:00","updated_at":"2026-02-12T08:52:15.91466062+11:00","dependencies":[{"issue_id":"bd-wisp-6z8","depends_on_id":"bd-wisp-imu","type":"parent-child","created_at":"2026-02-12T08:52:15.947567899+11:00","created_by":"frankentui/witness"},{"issue_id":"bd-wisp-6z8","depends_on_id":"bd-wisp-77a","type":"blocks","created_at":"2026-02-12T08:52:15.983929827+11:00","created_by":"frankentui/witness"}],"ephemeral":true}
{"id":"bd-wisp-77a","title":"Check own context limit","description":"Check own context usage.\n\nIf context is HIGH (\u003e80%):\n- Ensure any notes are written to handoff mail\n- Prepare for session restart\n\nIf context is LOW:\n- Can continue patrolling","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-12T08:52:15.913722118+11:00","updated_at":"2026-02-12T08:52:15.913722198+11:00","dependencies":[{"issue_id":"bd-wisp-77a","depends_on_id":"bd-wisp-imu","type":"parent-child","created_at":"2026-02-12T08:52:15.944918388+11:00","created_by":"frankentui/witness"},{"issue_id":"bd-wisp-77a","depends_on_id":"bd-wisp-7ch","type":"blocks","created_at":"2026-02-12T08:52:15.97970262+11:00","created_by":"frankentui/witness"}],"ephemeral":true}
{"id":"bd-wisp-79e","title":"Inspect all active polecats","description":"Survey all polecats using agent beads (ZFC: trust what agents report).\n\n**Step 1: List polecat agent beads**\n\n```bash\nbd list --type=agent --json\n```\n\nFilter the JSON output for entries where description contains `role_type: polecat`.\nEach polecat agent bead has fields in its description:\n- `role_type: polecat`\n- `rig: \u003crig-name\u003e`\n- `agent_state: running|idle|stuck|done`\n- `hook_bead: \u003ccurrent-work-id\u003e`\n\n**Step 2: For each polecat, check agent_state**\n\n| agent_state | Meaning | Action |\n|-------------|---------|--------|\n| running | Actively working | Check progress (Step 3) |\n| idle | No work assigned | Auto-nuke if clean (Step 3a) |\n| stuck | Self-reported stuck | Handle stuck protocol |\n| done | Work complete | Verify cleanup triggered (see Step 4a) |\n\n**Step 3: For running polecats, assess progress**\n\nCheck the hook_bead field to see what they're working on:\n```bash\nbd show \u003chook_bead\u003e  # See current step/issue\n```\n\nYou can also verify they're responsive:\n```bash\ntmux capture-pane -t gt-\u003crig\u003e-\u003cname\u003e -p | tail -20\n```\n\nLook for:\n- Recent tool activity → making progress\n- Idle at prompt → may need nudge\n- Error messages → may need help\n\n**Step 3a: For idle polecats, auto-nuke if clean**\n\nWhen agent_state=idle, the polecat has no work assigned. Check if it's safe to nuke:\n\n```bash\n# Check git status in the polecat's worktree\ncd polecats/\u003cname\u003e\ngit status --porcelain         # Should be empty (clean)\ngit log origin/main..HEAD      # Should have no unpushed commits\n```\n\n**If clean** (no uncommitted changes, no unpushed commits):\n```bash\n# Safe to nuke - no work to lose\ngt polecat nuke \u003cname\u003e\n```\nLog the auto-nuke for audit purposes. No escalation needed.\n\n**If dirty** (uncommitted or unpushed work):\n```bash\n# Escalate to Mayor - polecat has work that might be valuable\ngt mail send mayor/ -s \\\"IDLE_DIRTY: \u003cpolecat\u003e has uncommitted work\\\" \\\n  -m \\\"Polecat: \u003cname\u003e\nState: idle (no hook_bead)\nGit status: \u003cuncommitted-files\u003e\nUnpushed commits: \u003ccount\u003e\n\nPlease advise: recover work or discard?\\\"\n```\n\n**Rationale**: Idle polecats with clean git state are pure overhead. They have\nno work and no state worth preserving. Nuking them immediately frees resources\nand reduces noise. Only escalate when there's actual work at risk.\n\n**Step 4: Decide action**\n\n| Observation | Action |\n|-------------|--------|\n| agent_state=running, recent activity | None |\n| agent_state=running, idle 5-15 min | Gentle nudge |\n| agent_state=running, idle 15+ min | Direct nudge with deadline |\n| agent_state=stuck | Assess and help or escalate |\n| agent_state=done | Verify cleanup triggered (see Step 4a) |\n\n**Step 4a: Handle agent_state=done**\n\nIn the ephemeral model, polecats with agent_state=done and cleanup_status=clean\nshould already be nuked by HandlePolecatDone. Finding one here indicates:\n\n1. **Stale agent bead** - polecat was nuked but bead remains\n   ```bash\n   # Verify polecat doesn't exist anymore\n   ls polecats/\u003cname\u003e 2\u003e/dev/null || echo \"Already nuked\"\n   ```\n   If nuked, the agent bead is stale. Clean it up or ignore.\n\n2. **Cleanup wisp exists** - polecat has dirty state needing intervention\n   ```bash\n   bd list --wisp --labels=polecat:\u003cname\u003e --status=open\n   ```\n   Process in process-cleanups step.\n\n3. **No wisp, polecat exists** - POLECAT_DONE mail was missed\n   Try auto-nuke directly (ephemeral model):\n   ```bash\n   # Check cleanup_status and nuke if clean\n   gt polecat nuke \u003cname\u003e  # Will fail if dirty\n   ```\n   If nuke fails (dirty state), create cleanup wisp for investigation.\n\n**Step 5: Execute nudges**\n```bash\ngt nudge \u003crig\u003e/polecats/\u003cname\u003e \"How's progress? Need help?\"\n```\n\n**Step 6: Escalate if needed**\n```bash\ngt mail send mayor/ -s \"Escalation: \u003cpolecat\u003e stuck\" \\\n  -m \"Polecat \u003cname\u003e reports stuck. Please intervene.\"\n```\n\n**Parallelism**: Use Task tool subagents to inspect multiple polecats concurrently.\n\n**ZFC Principle**: Trust agent_state from beads. Don't infer state from PID/tmux.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-06T07:15:33.012761396+11:00","updated_at":"2026-02-06T07:15:33.012761477+11:00","ephemeral":true}
{"id":"bd-wisp-79v","title":"Check for more work","description":"More branches to process?\n\n**Entry paths:**\n- Normal: After successful merge-push\n- Conflict-skip: After process-branch created conflict-resolution task\n\nIf yes: Return to process-branch with next branch.\nIf no: Continue to generate-summary.\n\n**Track for this cycle:**\n- branches_merged: count and names of successfully merged branches\n- branches_conflict: count and names of branches skipped due to conflicts\n- conflict_tasks: IDs of conflict-resolution tasks created\n\nThis tracking feeds into generate-summary for the patrol digest.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-12T07:37:40.37922241+11:00","updated_at":"2026-02-12T07:39:01.046075076+11:00","closed_at":"2026-02-12T07:39:01.046075076+11:00","close_reason":"Closed","dependencies":[{"issue_id":"bd-wisp-79v","depends_on_id":"bd-wisp-j5h","type":"parent-child","created_at":"2026-02-12T07:37:40.405574591+11:00","created_by":"refinery"},{"issue_id":"bd-wisp-79v","depends_on_id":"bd-wisp-4gv","type":"blocks","created_at":"2026-02-12T07:37:40.434929161+11:00","created_by":"refinery"}],"ephemeral":true}
{"id":"bd-wisp-7ch","title":"End-of-cycle inbox hygiene","description":"Verify inbox hygiene before ending patrol cycle.\n\n**Step 1: Check inbox state**\n```bash\ngt mail inbox\n```\n\nIn the ephemeral model, most POLECAT_DONE messages are handled immediately\n(auto-nuke) and archived. Inbox should contain ONLY:\n- Unprocessed messages (just arrived, will handle next cycle)\n- MERGED notifications (informational, archive after reading)\n\n**Step 2: Archive any stale messages**\n\nLook for messages that were processed but not archived:\n- POLECAT_STARTED older than this cycle → archive\n- POLECAT_DONE that was auto-nuked → should be archived already\n- MERGED notifications → archive after acknowledging\n- HELP/Blocked that was escalated → archive\n- SWARM_START that created tracking wisp → archive\n\n```bash\n# For each stale message found:\ngt mail archive \u003cmessage-id\u003e\n```\n\n**Step 3: Verify cleanup wisp hygiene**\n\nIn the ephemeral model, cleanup wisps should be rare (only for dirty polecats):\n```bash\nbd list --wisp --labels=cleanup --status=open\n```\n\n- state:pending → Needs investigation in process-cleanups\n- state:merge-requested → Legacy state, handle in inbox-check\n\nIf cleanup wisps are accumulating, investigate why polecats aren't clean.\n\n**Goal**: Inbox should be nearly empty. Cleanup wisps should be rare.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-12T08:52:15.912882962+11:00","updated_at":"2026-02-12T08:52:15.912883082+11:00","dependencies":[{"issue_id":"bd-wisp-7ch","depends_on_id":"bd-wisp-imu","type":"parent-child","created_at":"2026-02-12T08:52:15.942318572+11:00","created_by":"frankentui/witness"},{"issue_id":"bd-wisp-7ch","depends_on_id":"bd-wisp-0uy","type":"blocks","created_at":"2026-02-12T08:52:15.974276978+11:00","created_by":"frankentui/witness"}],"ephemeral":true}
{"id":"bd-wisp-7tv","title":"Process pending cleanup wisps","description":"Process cleanup wisps (exception handling for dirty polecats).\n\nIn the ephemeral model, cleanup wisps are only created when a polecat has\ndirty state (uncommitted changes, unpushed commits) that prevented immediate\nnuke. Most polecats are nuked immediately on POLECAT_DONE and never create wisps.\n\n```bash\n# Find all cleanup wisps\nbd list --wisp --labels=cleanup --status=open\n```\n\nIf no wisps, skip this step (most common case in ephemeral model).\n\nFor each cleanup wisp, investigate and resolve the dirty state:\n\n## State: pending (needs investigation)\n\n1. **Extract polecat name** from wisp title/labels\n\n2. **Diagnose the problem**:\n```bash\ncd polecats/\u003cname\u003e\ngit status                    # What's uncommitted?\ngit stash list                # Any stashed work?\ngit log origin/main..HEAD     # Any unpushed commits?\n```\n\n3. **Resolution options**:\n   - **Uncommitted changes**: Commit and push, then nuke\n   - **Stashed work**: Pop and commit, or discard if not valuable\n   - **Unpushed commits**: Push to origin, then nuke\n   - **All valuable work lost**: Escalate to Mayor for recovery\n\n4. **If resolvable locally**: Fix and nuke\n```bash\n# Example: push unpushed commits\ngit push origin HEAD\n\n# Then nuke\ngt polecat nuke \u003cname\u003e\n\n# Close the wisp\nbd close \u003cwisp-id\u003e --reason \"Resolved: pushed commits, nuked\"\n```\n\n5. **If needs escalation**: Send RECOVERY_NEEDED to Mayor\n```bash\ngt mail send mayor/ -s \"RECOVERY_NEEDED \u003crig\u003e/\u003cpolecat\u003e\" \\\n  -m \"Cleanup Status: \u003cstatus\u003e\nBranch: \u003cbranch\u003e\nIssue: \u003cissue-id\u003e\n\nCannot auto-resolve. Please advise.\"\n```\nLeave wisp open until Mayor resolves.\n\n## State: merge-requested (legacy, rare)\n\nThis state was used before the ephemeral model. If found, the polecat is\nwaiting for a MERGED signal. The inbox-check step handles these.\n\n**Parallelism**: Use Task tool subagents to process multiple cleanups concurrently.\nEach cleanup is independent - perfect for parallel execution.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-06T23:36:29.557180966+11:00","updated_at":"2026-02-06T23:36:29.557181048+11:00","dependencies":[{"issue_id":"bd-wisp-7tv","depends_on_id":"bd-wisp-05q","type":"parent-child","created_at":"2026-02-06T23:36:29.602454343+11:00","created_by":"witness"}],"ephemeral":true}
{"id":"bd-wisp-82t","title":"Ensure refinery is alive","description":"Ensure the refinery is alive and processing merge requests.\n\n```bash\n# Check if refinery session exists\ngt session status \u003crig\u003e/refinery\n\n# Check for pending merge requests\nbd list --type=merge-request --status=open\n```\n\nIf MRs waiting AND refinery not running:\n```bash\ngt session start \u003crig\u003e/refinery\ngt mail send \u003crig\u003e/refinery -s \"PATROL: Wake up\" -m \"Merge requests in queue. Please process.\"\n```\n\nIf refinery running but queue stale (\u003e30 min), send nudge.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-06T23:36:29.559614401+11:00","updated_at":"2026-02-06T23:36:29.559614514+11:00","dependencies":[{"issue_id":"bd-wisp-82t","depends_on_id":"bd-wisp-05q","type":"parent-child","created_at":"2026-02-06T23:36:29.616080662+11:00","created_by":"witness"},{"issue_id":"bd-wisp-82t","depends_on_id":"bd-wisp-7tv","type":"blocks","created_at":"2026-02-06T23:36:29.726107207+11:00","created_by":"witness"}],"ephemeral":true}
{"id":"bd-wisp-8q6","title":"Check if active swarm is complete","description":"If Mayor started a batch (SWARM_START), check if all polecats have completed.\n\n**Step 1: Find active swarm tracking wisps**\n```bash\nbd list --wisp --labels=swarm --status=open\n```\nIf no active swarm, skip this step.\n\n**Step 2: Count completed polecats for this swarm**\n\nExtract from wisp labels: swarm_id, total, completed, start timestamp.\nCheck how many cleanup wisps have been closed for this swarm's polecats.\n\n**Step 3: If all complete, notify Mayor**\n```bash\ngt mail send mayor/ -s \"SWARM_COMPLETE: \u003cswarm_id\u003e\" -m \"All \u003ctotal\u003e polecats merged.\nDuration: \u003cminutes\u003e minutes\nSwarm: \u003cswarm_id\u003e\"\n\n# Close the swarm tracking wisp\nbd close \u003cswarm-wisp-id\u003e --reason \"All polecats merged\"\n```\n\nNote: Runs every patrol cycle. Notification sent exactly once when all complete.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-12T08:52:15.91092713+11:00","updated_at":"2026-02-12T08:52:15.91092719+11:00","dependencies":[{"issue_id":"bd-wisp-8q6","depends_on_id":"bd-wisp-imu","type":"parent-child","created_at":"2026-02-12T08:52:15.935657509+11:00","created_by":"frankentui/witness"},{"issue_id":"bd-wisp-8q6","depends_on_id":"bd-wisp-lrj","type":"blocks","created_at":"2026-02-12T08:52:15.966323124+11:00","created_by":"frankentui/witness"}],"ephemeral":true}
{"id":"bd-wisp-8wy","title":"mol-witness-patrol","description":"Per-rig worker monitor patrol loop.\n\nThe Witness is the Pit Boss for your rig. You watch polecats, nudge them toward\ncompletion, verify clean git state before kills, and escalate stuck workers.\n\n**You do NOT do implementation work.** Your job is oversight, not coding.\n\n## Ephemeral Polecat Model\n\nPolecats are truly ephemeral - done at MR submission, recyclable immediately:\n\n```\nPolecat lifecycle: spawning → working → mr_submitted → nuked\nMR lifecycle:      created → queued → processed → merged (Refinery handles)\n```\n\nOnce a polecat's branch is pushed (cleanup_status=clean), the polecat can be\nnuked immediately. The MR continues independently in the Refinery. If conflicts\narise, Refinery creates a NEW conflict-resolution task for a NEW polecat.\n\n**Key principle**: Polecat lifecycle is separate from MR lifecycle.\n\n## Design Philosophy\n\nThis patrol follows Gas Town principles:\n- **Discovery over tracking**: Observe reality each cycle, don't maintain state\n- **Events over state**: POLECAT_DONE mail triggers immediate cleanup\n- **Ephemeral by default**: Clean polecats are nuked immediately, no waiting\n- **Cleanup wisps for exceptions**: Only created when intervention needed\n- **Task tool for parallelism**: Subagents inspect polecats, not molecule arms\n\n## Patrol Shape (Linear, Deacon-style)\n\n```\ninbox-check ─► process-cleanups ─► check-refinery ─► survey-workers\n                                                            │\n         ┌──────────────────────────────────────────────────┘\n         ▼\n  check-timer-gates ─► check-swarm ─► ping-deacon ─► patrol-cleanup ─► context-check ─► loop-or-exit\n```\n\nNo dynamic arms. No fanout gates. No persistent nudge counters.\nState is discovered each cycle from reality (tmux, beads, mail).","status":"open","priority":2,"issue_type":"epic","assignee":"frankentui/witness","created_at":"2026-02-12T08:45:07.603756806+11:00","updated_at":"2026-02-12T08:46:59.8879149+11:00","ephemeral":true}
{"id":"bd-wisp-apd","title":"Process witness mail","description":"Check inbox and handle messages.\n\n```bash\ngt mail inbox\n```\n\nFor each message:\n\n**POLECAT_STARTED**:\nA new polecat has started working. Acknowledge and archive.\n```bash\n# Acknowledge startup (optional: log for activity tracking)\ngt mail archive \u003cmessage-id\u003e\n```\nNo action needed beyond acknowledgment - archive immediately.\n\n**POLECAT_DONE / LIFECYCLE:Shutdown**:\n\n*EPHEMERAL MODEL*: Polecats are truly ephemeral - done at MR submission,\nrecyclable immediately. Once the branch is pushed (cleanup_status=clean),\nthe polecat can be nuked. The MR lifecycle continues independently in the\nRefinery. If conflicts arise, Refinery creates a NEW conflict-resolution\ntask for a NEW polecat.\n\nPolecat lifecycle: spawning → working → mr_submitted → nuked\nMR lifecycle: created → queued → processed → merged (handled by Refinery)\n\nThe handler (HandlePolecatDone) will:\n1. Check cleanup_status from agent bead\n2. If \"clean\" (branch pushed): AUTO-NUKE immediately, archive mail\n3. If dirty: Create cleanup wisp for manual intervention\n\n```bash\n# The handler does this automatically:\n# - For clean state: gt polecat nuke \u003cname\u003e → archive mail\n# - For dirty state: create wisp → process in next step\n```\n\nCleanup wisps are only created when something is wrong (uncommitted changes,\nunpushed commits). Most POLECAT_DONE messages result in immediate nuke.\n\n**MERGED**:\nA branch was merged successfully. This is informational in the ephemeral model\nsince the polecat was already nuked after MR submission.\n\nIf a cleanup wisp exists (dirty state), complete the cleanup:\n```bash\n# Find the cleanup wisp for this polecat\nbd list --wisp --labels=polecat:\u003cname\u003e,state:merge-requested --status=open\n\n# If found, proceed with full polecat nuke:\ngt polecat nuke \u003cname\u003e\n\n# Burn the cleanup wisp\nbd close \u003cwisp-id\u003e\n```\nArchive after cleanup is complete.\n\n**HELP / Blocked**:\nAssess the request. Can you help? If not, escalate to Mayor:\n```bash\ngt mail send mayor/ -s \"Escalation: \u003cpolecat\u003e needs help\" -m \"\u003cdetails\u003e\"\n```\nArchive after handling (escalated or resolved):\n```bash\ngt mail archive \u003cmessage-id\u003e\n```\n\n**HANDOFF**:\nRead predecessor context. Continue from where they left off.\nArchive after absorbing context:\n```bash\ngt mail archive \u003cmessage-id\u003e\n```\n\n**SWARM_START**:\nMayor initiating batch polecat work. Initialize swarm tracking.\n```bash\n# Parse swarm info from mail body: {\"swarm_id\": \"batch-123\", \"beads\": [\"bd-a\", \"bd-b\"]}\nbd create --wisp --title \"swarm:\u003cswarm_id\u003e\" --description \"Tracking batch: \u003cswarm_id\u003e\" --labels swarm,swarm_id:\u003cswarm_id\u003e,total:\u003cN\u003e,completed:0,start:\u003ctimestamp\u003e\n```\nArchive after creating swarm tracking wisp:\n```bash\ngt mail archive \u003cmessage-id\u003e\n```\n\n**Hygiene principle**: Archive messages after they're fully processed.\nKeep only: active work, unprocessed requests. Inbox should be near-empty.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-12T08:52:15.90599055+11:00","updated_at":"2026-02-12T08:52:15.90599064+11:00","dependencies":[{"issue_id":"bd-wisp-apd","depends_on_id":"bd-wisp-imu","type":"parent-child","created_at":"2026-02-12T08:52:15.916390879+11:00","created_by":"frankentui/witness"}],"ephemeral":true}
{"id":"bd-wisp-brm","title":"End-of-cycle inbox hygiene","description":"Verify inbox hygiene before ending patrol cycle.\n\n**Step 1: Check inbox state**\n```bash\ngt mail inbox\n```\n\nInbox should contain ONLY:\n- Unprocessed MERGE_READY messages (will process next cycle)\n- Active work items\n\n**Step 2: Archive any stale messages**\n\nLook for messages that were processed but not archived:\n- PATROL: Wake up that was acknowledged → archive\n- HELP/Blocked that was handled → archive\n- MERGE_READY where merge completed but archive was missed → archive\n\n```bash\n# For each stale message found:\ngt mail archive \u003cmessage-id\u003e\n```\n\n**Step 3: Check for orphaned MR beads**\n\nLook for open MR beads with no corresponding branch:\n```bash\nbd list --type=merge-request --status=open\n```\n\nFor each open MR bead:\n1. Check if branch exists: `git ls-remote origin refs/heads/\u003cbranch\u003e`\n2. If branch gone, verify work is on main: `git log origin/main --oneline | grep \"\u003csource_issue\u003e\"`\n3. If work on main → close MR with reason \"Merged (verified on main)\"\n4. If work NOT on main → investigate before closing:\n   - Check source_issue validity (should be gt-xxxxx, not branch name)\n   - Search reflog/dangling commits if possible\n   - If unverifiable, close with reason \"Unverifiable - no audit trail\"\n   - File bead if this indicates lost work\n\n**NEVER close an MR bead without verifying the work landed or is unrecoverable.**\n\n**Goal**: Inbox should have ≤3 active messages at end of cycle.\nKeep only: pending MRs in queue.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-12T07:37:40.382382672+11:00","updated_at":"2026-02-12T07:37:40.382382752+11:00","dependencies":[{"issue_id":"bd-wisp-brm","depends_on_id":"bd-wisp-j5h","type":"parent-child","created_at":"2026-02-12T07:37:40.416903926+11:00","created_by":"refinery"},{"issue_id":"bd-wisp-brm","depends_on_id":"bd-wisp-dge","type":"blocks","created_at":"2026-02-12T07:37:40.445928979+11:00","created_by":"refinery"}],"ephemeral":true}
{"id":"bd-wisp-bvj","title":"Check refinery mail","description":"Check mail for MERGE_READY submissions, escalations, and messages.\n\n```bash\ngt mail inbox\n```\n\nFor each message:\n\n**MERGE_READY**:\nA polecat's work is ready for merge. Extract details and track for processing.\n\n```bash\n# Parse MERGE_READY message body:\n# Branch: \u003cbranch\u003e\n# Issue: \u003cissue-id\u003e\n# Polecat: \u003cpolecat-name\u003e\n# MR: \u003cmr-bead-id\u003e\n# Verified: clean git state, issue closed\n\n# Track in your merge queue for this patrol cycle:\n# - Branch name\n# - Issue ID\n# - Polecat name (REQUIRED for MERGED notification)\n# - MR bead ID (REQUIRED for closing after merge)\n```\n\n**IMPORTANT**: You MUST track the polecat name, MR bead ID, AND message ID - you will need them\nin merge-push step to send MERGED notification, close the MR bead, and archive the mail.\n\nMark as read. The work will be processed in queue-scan/process-branch.\n**Do NOT archive yet** - archive after merge/reject decision in merge-push step.\n\n**PATROL: Wake up**:\nWitness detected MRs waiting but refinery idle. Acknowledge and archive:\n```bash\ngt mail archive \u003cmessage-id\u003e\n```\n\n**HELP / Blocked**:\nAssess and respond. If you can't help, escalate to Mayor.\nArchive after handling:\n```bash\ngt mail archive \u003cmessage-id\u003e\n```\n\n**HANDOFF**:\nRead predecessor context. Check for in-flight merges.\nArchive after absorbing context:\n```bash\ngt mail archive \u003cmessage-id\u003e\n```\n\n**Hygiene principle**: Archive messages after they're fully processed.\nKeep only: pending MRs in queue. Inbox should be near-empty.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-12T07:37:40.374441338+11:00","updated_at":"2026-02-12T07:38:14.351950648+11:00","closed_at":"2026-02-12T07:38:14.351950648+11:00","close_reason":"Closed","dependencies":[{"issue_id":"bd-wisp-bvj","depends_on_id":"bd-wisp-j5h","type":"parent-child","created_at":"2026-02-12T07:37:40.385694709+11:00","created_by":"refinery"}],"ephemeral":true}
{"id":"bd-wisp-d0b","title":"mol-witness-patrol","description":"Per-rig worker monitor patrol loop.\n\nThe Witness is the Pit Boss for your rig. You watch polecats, nudge them toward\ncompletion, verify clean git state before kills, and escalate stuck workers.\n\n**You do NOT do implementation work.** Your job is oversight, not coding.\n\n## Ephemeral Polecat Model\n\nPolecats are truly ephemeral - done at MR submission, recyclable immediately:\n\n```\nPolecat lifecycle: spawning → working → mr_submitted → nuked\nMR lifecycle:      created → queued → processed → merged (Refinery handles)\n```\n\nOnce a polecat's branch is pushed (cleanup_status=clean), the polecat can be\nnuked immediately. The MR continues independently in the Refinery. If conflicts\narise, Refinery creates a NEW conflict-resolution task for a NEW polecat.\n\n**Key principle**: Polecat lifecycle is separate from MR lifecycle.\n\n## Design Philosophy\n\nThis patrol follows Gas Town principles:\n- **Discovery over tracking**: Observe reality each cycle, don't maintain state\n- **Events over state**: POLECAT_DONE mail triggers immediate cleanup\n- **Ephemeral by default**: Clean polecats are nuked immediately, no waiting\n- **Cleanup wisps for exceptions**: Only created when intervention needed\n- **Task tool for parallelism**: Subagents inspect polecats, not molecule arms\n\n## Patrol Shape (Linear, Deacon-style)\n\n```\ninbox-check ─► process-cleanups ─► check-refinery ─► survey-workers\n                                                            │\n         ┌──────────────────────────────────────────────────┘\n         ▼\n  check-timer-gates ─► check-swarm ─► ping-deacon ─► patrol-cleanup ─► context-check ─► loop-or-exit\n```\n\nNo dynamic arms. No fanout gates. No persistent nudge counters.\nState is discovered each cycle from reality (tmux, beads, mail).","status":"hooked","priority":2,"issue_type":"epic","assignee":"frankentui/witness","created_at":"2026-02-12T07:40:21.561034949+11:00","updated_at":"2026-02-12T07:40:22.005797722+11:00","ephemeral":true}
{"id":"bd-wisp-dge","title":"Check own context limit","description":"Check own context usage.\n\nIf context is HIGH (\u003e80%):\n- Write handoff summary\n- Prepare for burn/respawn\n\nIf context is LOW:\n- Can continue processing","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-12T07:37:40.38168626+11:00","updated_at":"2026-02-12T07:37:40.38168632+11:00","dependencies":[{"issue_id":"bd-wisp-dge","depends_on_id":"bd-wisp-j5h","type":"parent-child","created_at":"2026-02-12T07:37:40.414431851+11:00","created_by":"refinery"},{"issue_id":"bd-wisp-dge","depends_on_id":"bd-wisp-5i0","type":"blocks","created_at":"2026-02-12T07:37:40.443379716+11:00","created_by":"refinery"}],"ephemeral":true}
{"id":"bd-wisp-fs4","title":"Inspect all active polecats","description":"Survey all polecats using agent beads (ZFC: trust what agents report).\n\n**Step 1: List polecat agent beads**\n\n```bash\nbd list --type=agent --json\n```\n\nFilter the JSON output for entries where description contains `role_type: polecat`.\nEach polecat agent bead has fields in its description:\n- `role_type: polecat`\n- `rig: \u003crig-name\u003e`\n- `agent_state: running|idle|stuck|done`\n- `hook_bead: \u003ccurrent-work-id\u003e`\n\n**Step 2: For each polecat, check agent_state**\n\n| agent_state | Meaning | Action |\n|-------------|---------|--------|\n| running | Actively working | Check progress (Step 3) |\n| idle | No work assigned | Auto-nuke if clean (Step 3a) |\n| stuck | Self-reported stuck | Handle stuck protocol |\n| done | Work complete | Verify cleanup triggered (see Step 4a) |\n\n**Step 3: For running polecats, assess progress**\n\nCheck the hook_bead field to see what they're working on:\n```bash\nbd show \u003chook_bead\u003e  # See current step/issue\n```\n\nYou can also verify they're responsive:\n```bash\ntmux capture-pane -t gt-\u003crig\u003e-\u003cname\u003e -p | tail -20\n```\n\nLook for:\n- Recent tool activity → making progress\n- Idle at prompt → may need nudge\n- Error messages → may need help\n\n**Step 3a: For idle polecats, auto-nuke if clean**\n\nWhen agent_state=idle, the polecat has no work assigned. Check if it's safe to nuke:\n\n```bash\n# Check git status in the polecat's worktree\ncd polecats/\u003cname\u003e\ngit status --porcelain         # Should be empty (clean)\ngit log origin/main..HEAD      # Should have no unpushed commits\n```\n\n**If clean** (no uncommitted changes, no unpushed commits):\n```bash\n# Safe to nuke - no work to lose\ngt polecat nuke \u003cname\u003e\n```\nLog the auto-nuke for audit purposes. No escalation needed.\n\n**If dirty** (uncommitted or unpushed work):\n```bash\n# Escalate to Mayor - polecat has work that might be valuable\ngt mail send mayor/ -s \\\"IDLE_DIRTY: \u003cpolecat\u003e has uncommitted work\\\" \\\n  -m \\\"Polecat: \u003cname\u003e\nState: idle (no hook_bead)\nGit status: \u003cuncommitted-files\u003e\nUnpushed commits: \u003ccount\u003e\n\nPlease advise: recover work or discard?\\\"\n```\n\n**Rationale**: Idle polecats with clean git state are pure overhead. They have\nno work and no state worth preserving. Nuking them immediately frees resources\nand reduces noise. Only escalate when there's actual work at risk.\n\n**Step 4: Decide action**\n\n| Observation | Action |\n|-------------|--------|\n| agent_state=running, recent activity | None |\n| agent_state=running, idle 5-15 min | Gentle nudge |\n| agent_state=running, idle 15+ min | Direct nudge with deadline |\n| agent_state=stuck | Assess and help or escalate |\n| agent_state=done | Verify cleanup triggered (see Step 4a) |\n\n**Step 4a: Handle agent_state=done**\n\nIn the ephemeral model, polecats with agent_state=done and cleanup_status=clean\nshould already be nuked by HandlePolecatDone. Finding one here indicates:\n\n1. **Stale agent bead** - polecat was nuked but bead remains\n   ```bash\n   # Verify polecat doesn't exist anymore\n   ls polecats/\u003cname\u003e 2\u003e/dev/null || echo \"Already nuked\"\n   ```\n   If nuked, the agent bead is stale. Clean it up or ignore.\n\n2. **Cleanup wisp exists** - polecat has dirty state needing intervention\n   ```bash\n   bd list --wisp --labels=polecat:\u003cname\u003e --status=open\n   ```\n   Process in process-cleanups step.\n\n3. **No wisp, polecat exists** - POLECAT_DONE mail was missed\n   Try auto-nuke directly (ephemeral model):\n   ```bash\n   # Check cleanup_status and nuke if clean\n   gt polecat nuke \u003cname\u003e  # Will fail if dirty\n   ```\n   If nuke fails (dirty state), create cleanup wisp for investigation.\n\n**Step 5: Execute nudges**\n```bash\ngt nudge \u003crig\u003e/polecats/\u003cname\u003e \"How's progress? Need help?\"\n```\n\n**Step 6: Escalate if needed**\n```bash\ngt mail send mayor/ -s \"Escalation: \u003cpolecat\u003e stuck\" \\\n  -m \"Polecat \u003cname\u003e reports stuck. Please intervene.\"\n```\n\n**Parallelism**: Use Task tool subagents to inspect multiple polecats concurrently.\n\n**ZFC Principle**: Trust agent_state from beads. Don't infer state from PID/tmux.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-06T23:36:29.561901537+11:00","updated_at":"2026-02-06T23:36:29.561901619+11:00","dependencies":[{"issue_id":"bd-wisp-fs4","depends_on_id":"bd-wisp-05q","type":"parent-child","created_at":"2026-02-06T23:36:29.647641643+11:00","created_by":"witness"},{"issue_id":"bd-wisp-fs4","depends_on_id":"bd-wisp-82t","type":"blocks","created_at":"2026-02-06T23:36:29.74095004+11:00","created_by":"witness"}],"ephemeral":true}
{"id":"bd-wisp-ghk","title":"Process pending cleanup wisps","description":"Process cleanup wisps (exception handling for dirty polecats).\n\nIn the ephemeral model, cleanup wisps are only created when a polecat has\ndirty state (uncommitted changes, unpushed commits) that prevented immediate\nnuke. Most polecats are nuked immediately on POLECAT_DONE and never create wisps.\n\n```bash\n# Find all cleanup wisps\nbd list --wisp --labels=cleanup --status=open\n```\n\nIf no wisps, skip this step (most common case in ephemeral model).\n\nFor each cleanup wisp, investigate and resolve the dirty state:\n\n## State: pending (needs investigation)\n\n1. **Extract polecat name** from wisp title/labels\n\n2. **Diagnose the problem**:\n```bash\ncd polecats/\u003cname\u003e\ngit status                    # What's uncommitted?\ngit stash list                # Any stashed work?\ngit log origin/main..HEAD     # Any unpushed commits?\n```\n\n3. **Resolution options**:\n   - **Uncommitted changes**: Commit and push, then nuke\n   - **Stashed work**: Pop and commit, or discard if not valuable\n   - **Unpushed commits**: Push to origin, then nuke\n   - **All valuable work lost**: Escalate to Mayor for recovery\n\n4. **If resolvable locally**: Fix and nuke\n```bash\n# Example: push unpushed commits\ngit push origin HEAD\n\n# Then nuke\ngt polecat nuke \u003cname\u003e\n\n# Close the wisp\nbd close \u003cwisp-id\u003e --reason \"Resolved: pushed commits, nuked\"\n```\n\n5. **If needs escalation**: Send RECOVERY_NEEDED to Mayor\n```bash\ngt mail send mayor/ -s \"RECOVERY_NEEDED \u003crig\u003e/\u003cpolecat\u003e\" \\\n  -m \"Cleanup Status: \u003cstatus\u003e\nBranch: \u003cbranch\u003e\nIssue: \u003cissue-id\u003e\n\nCannot auto-resolve. Please advise.\"\n```\nLeave wisp open until Mayor resolves.\n\n## State: merge-requested (legacy, rare)\n\nThis state was used before the ephemeral model. If found, the polecat is\nwaiting for a MERGED signal. The inbox-check step handles these.\n\n**Parallelism**: Use Task tool subagents to process multiple cleanups concurrently.\nEach cleanup is independent - perfect for parallel execution.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-12T08:52:15.907124915+11:00","updated_at":"2026-02-12T08:52:15.907124995+11:00","dependencies":[{"issue_id":"bd-wisp-ghk","depends_on_id":"bd-wisp-imu","type":"parent-child","created_at":"2026-02-12T08:52:15.919130573+11:00","created_by":"frankentui/witness"},{"issue_id":"bd-wisp-ghk","depends_on_id":"bd-wisp-apd","type":"blocks","created_at":"2026-02-12T08:52:15.951456259+11:00","created_by":"frankentui/witness"}],"ephemeral":true}
{"id":"bd-wisp-god","title":"Inspect all active polecats","description":"Survey all polecats using agent beads (ZFC: trust what agents report).\n\n**Step 1: List polecat agent beads**\n\n```bash\nbd list --type=agent --json\n```\n\nFilter the JSON output for entries where description contains `role_type: polecat`.\nEach polecat agent bead has fields in its description:\n- `role_type: polecat`\n- `rig: \u003crig-name\u003e`\n- `agent_state: running|idle|stuck|done`\n- `hook_bead: \u003ccurrent-work-id\u003e`\n\n**Step 2: For each polecat, check agent_state**\n\n| agent_state | Meaning | Action |\n|-------------|---------|--------|\n| running | Actively working | Check progress (Step 3) |\n| idle | No work assigned | Auto-nuke if clean (Step 3a) |\n| stuck | Self-reported stuck | Handle stuck protocol |\n| done | Work complete | Verify cleanup triggered (see Step 4a) |\n\n**Step 3: For running polecats, assess progress**\n\nCheck the hook_bead field to see what they're working on:\n```bash\nbd show \u003chook_bead\u003e  # See current step/issue\n```\n\nYou can also verify they're responsive:\n```bash\ntmux capture-pane -t gt-\u003crig\u003e-\u003cname\u003e -p | tail -20\n```\n\nLook for:\n- Recent tool activity → making progress\n- Idle at prompt → may need nudge\n- Error messages → may need help\n\n**Step 3a: For idle polecats, auto-nuke if clean**\n\nWhen agent_state=idle, the polecat has no work assigned. Check if it's safe to nuke:\n\n```bash\n# Check git status in the polecat's worktree\ncd polecats/\u003cname\u003e\ngit status --porcelain         # Should be empty (clean)\ngit log origin/main..HEAD      # Should have no unpushed commits\n```\n\n**If clean** (no uncommitted changes, no unpushed commits):\n```bash\n# Safe to nuke - no work to lose\ngt polecat nuke \u003cname\u003e\n```\nLog the auto-nuke for audit purposes. No escalation needed.\n\n**If dirty** (uncommitted or unpushed work):\n```bash\n# Escalate to Mayor - polecat has work that might be valuable\ngt mail send mayor/ -s \\\"IDLE_DIRTY: \u003cpolecat\u003e has uncommitted work\\\" \\\n  -m \\\"Polecat: \u003cname\u003e\nState: idle (no hook_bead)\nGit status: \u003cuncommitted-files\u003e\nUnpushed commits: \u003ccount\u003e\n\nPlease advise: recover work or discard?\\\"\n```\n\n**Rationale**: Idle polecats with clean git state are pure overhead. They have\nno work and no state worth preserving. Nuking them immediately frees resources\nand reduces noise. Only escalate when there's actual work at risk.\n\n**Step 4: Decide action**\n\n| Observation | Action |\n|-------------|--------|\n| agent_state=running, recent activity | None |\n| agent_state=running, idle 5-15 min | Gentle nudge |\n| agent_state=running, idle 15+ min | Direct nudge with deadline |\n| agent_state=stuck | Assess and help or escalate |\n| agent_state=done | Verify cleanup triggered (see Step 4a) |\n\n**Step 4a: Handle agent_state=done**\n\nIn the ephemeral model, polecats with agent_state=done and cleanup_status=clean\nshould already be nuked by HandlePolecatDone. Finding one here indicates:\n\n1. **Stale agent bead** - polecat was nuked but bead remains\n   ```bash\n   # Verify polecat doesn't exist anymore\n   ls polecats/\u003cname\u003e 2\u003e/dev/null || echo \"Already nuked\"\n   ```\n   If nuked, the agent bead is stale. Clean it up or ignore.\n\n2. **Cleanup wisp exists** - polecat has dirty state needing intervention\n   ```bash\n   bd list --wisp --labels=polecat:\u003cname\u003e --status=open\n   ```\n   Process in process-cleanups step.\n\n3. **No wisp, polecat exists** - POLECAT_DONE mail was missed\n   Try auto-nuke directly (ephemeral model):\n   ```bash\n   # Check cleanup_status and nuke if clean\n   gt polecat nuke \u003cname\u003e  # Will fail if dirty\n   ```\n   If nuke fails (dirty state), create cleanup wisp for investigation.\n\n**Step 5: Execute nudges**\n```bash\ngt nudge \u003crig\u003e/polecats/\u003cname\u003e \"How's progress? Need help?\"\n```\n\n**Step 6: Escalate if needed**\n```bash\ngt mail send mayor/ -s \"Escalation: \u003cpolecat\u003e stuck\" \\\n  -m \"Polecat \u003cname\u003e reports stuck. Please intervene.\"\n```\n\n**Parallelism**: Use Task tool subagents to inspect multiple polecats concurrently.\n\n**ZFC Principle**: Trust agent_state from beads. Don't infer state from PID/tmux.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-12T08:52:15.908949302+11:00","updated_at":"2026-02-12T08:52:15.908949382+11:00","dependencies":[{"issue_id":"bd-wisp-god","depends_on_id":"bd-wisp-imu","type":"parent-child","created_at":"2026-02-12T08:52:15.926025562+11:00","created_by":"frankentui/witness"},{"issue_id":"bd-wisp-god","depends_on_id":"bd-wisp-tx3","type":"blocks","created_at":"2026-02-12T08:52:15.957755896+11:00","created_by":"frankentui/witness"}],"ephemeral":true}
{"id":"bd-wisp-he0","title":"Generate handoff summary","description":"Summarize this patrol cycle.\n\n**VERIFICATION**: Before generating summary, confirm for each merged branch:\n- [ ] MERGED mail was sent to witness\n- [ ] MR bead was closed\n- [ ] MERGE_READY mail archived\n\nIf any notifications or archiving were missed, do them now!\n\nInclude in summary:\n- Branches merged (count, names)\n- MERGED mails sent (count - should match branches merged)\n- MR beads closed (count - should match branches merged)\n- MERGE_READY mails archived (count - should match branches merged)\n- Test results (pass/fail)\n- Branches with conflicts (count, names)\n- Conflict-resolution tasks created (IDs)\n- Issues filed (if any)\n- Any escalations sent\n\n**Conflict tracking is important** for monitoring MQ health. If many branches\nconflict, it may indicate main is moving too fast or branches are too stale.\n\nThis becomes the digest when the patrol is squashed.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-12T07:37:40.380103288+11:00","updated_at":"2026-02-12T07:37:40.380103348+11:00","dependencies":[{"issue_id":"bd-wisp-he0","depends_on_id":"bd-wisp-j5h","type":"parent-child","created_at":"2026-02-12T07:37:40.408910007+11:00","created_by":"refinery"},{"issue_id":"bd-wisp-he0","depends_on_id":"bd-wisp-79v","type":"blocks","created_at":"2026-02-12T07:37:40.437601765+11:00","created_by":"refinery"}],"ephemeral":true}
{"id":"bd-wisp-id0","title":"Mechanical rebase","description":"Pick next branch from queue. Attempt mechanical rebase on current main.\n\n**Config: target_branch = main**\n\n**Step 1: Checkout and attempt rebase**\n```bash\ngit checkout -b temp origin/\u003cpolecat-branch\u003e\ngit rebase origin/main\n```\n\n**Step 2: Check rebase result**\n\nThe rebase exits with:\n- Exit code 0: Success - proceed to run-tests\n- Exit code 1 (conflicts): Conflict detected - proceed to Step 3\n\nTo detect conflict state after rebase fails:\n```bash\n# Check if we're in a conflicted rebase state\nls .git/rebase-merge 2\u003e/dev/null \u0026\u0026 echo \"CONFLICT_STATE\"\n```\n\n**Step 3: Handle conflicts (if any)**\n\nIf rebase SUCCEEDED (exit code 0):\n- Skip to run-tests step (continue normal merge flow)\n\nIf rebase FAILED with conflicts:\n\n1. **Abort the rebase** (DO NOT leave repo in conflicted state):\n```bash\ngit rebase --abort\n```\n\n2. **Record conflict metadata**:\n```bash\n# Capture main SHA for reference\nMAIN_SHA=$(git rev-parse origin/main)\nBRANCH_SHA=$(git rev-parse origin/\u003cpolecat-branch\u003e)\n```\n\n3. **Create conflict-resolution task**:\n```bash\nbd create --type=task --priority=1 --title=\"Resolve merge conflicts: \u003coriginal-issue-title\u003e\" --description=\"## Conflict Resolution Required\n\nOriginal MR: \u003cmr-bead-id\u003e\nBranch: \u003cpolecat-branch\u003e\nOriginal Issue: \u003cissue-id\u003e\nConflict with main at: ${MAIN_SHA}\nBranch SHA: ${BRANCH_SHA}\n\n## Instructions\n1. Clone/checkout the branch\n2. Rebase on current main: git rebase origin/main\n3. Resolve conflicts\n4. Force push: git push -f origin \u003cbranch\u003e\n5. Close this task when done\n\nThe MR will be re-queued for processing after conflicts are resolved.\"\n```\n\n4. **Skip this MR** (do NOT delete branch or close MR bead):\n- Leave branch intact for conflict resolution\n- Leave MR bead open (will be re-processed after resolution)\n- Continue to loop-check for next branch\n\n**CRITICAL**: Never delete a branch that has conflicts. The branch contains\nthe original work and must be preserved for conflict resolution.\n\nTrack: rebase result (success/conflict), conflict task ID if created.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-12T07:37:40.376091504+11:00","updated_at":"2026-02-12T07:39:00.04086266+11:00","closed_at":"2026-02-12T07:39:00.04086266+11:00","close_reason":"Closed","dependencies":[{"issue_id":"bd-wisp-id0","depends_on_id":"bd-wisp-j5h","type":"parent-child","created_at":"2026-02-12T07:37:40.391956919+11:00","created_by":"refinery"},{"issue_id":"bd-wisp-id0","depends_on_id":"bd-wisp-3h2","type":"blocks","created_at":"2026-02-12T07:37:40.424015383+11:00","created_by":"refinery"}],"ephemeral":true}
{"id":"bd-wisp-imq","title":"Burn and respawn or loop","description":"End of patrol cycle decision.\n\n**Step 1: Estimate remaining context**\n\nAsk yourself:\n- Have I processed many branches this cycle?\n- Is the conversation getting long?\n- Am I starting to lose track of earlier context?\n\nRule of thumb: If you've done 3+ merges or processed significant cleanup work,\nit's time for a fresh session.\n\n**Step 2: Decision tree**\n\nIf queue non-empty AND context LOW:\n- Squash this wisp to digest\n- Spawn fresh patrol wisp\n- Return to inbox-check\n\nIf queue empty OR context HIGH OR good stopping point:\n- Squash wisp with summary digest\n- Use `gt handoff` for clean session transition:\n\n```bash\ngt handoff -s \"Patrol complete\" -m \"Merged X branches, Y tests passed.\nQueue: empty/N remaining\nNext: [any notes for successor]\"\n```\n\n**Why gt handoff?**\n- Sends handoff mail to yourself with context\n- Respawns with fresh Claude instance\n- SessionStart hook runs gt prime\n- Successor picks up from your hook\n\n**DO NOT just exit.** Always use `gt handoff` for proper lifecycle.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-12T07:37:40.383778193+11:00","updated_at":"2026-02-12T07:37:40.383778253+11:00","dependencies":[{"issue_id":"bd-wisp-imq","depends_on_id":"bd-wisp-j5h","type":"parent-child","created_at":"2026-02-12T07:37:40.419808504+11:00","created_by":"refinery"},{"issue_id":"bd-wisp-imq","depends_on_id":"bd-wisp-brm","type":"blocks","created_at":"2026-02-12T07:37:40.448320665+11:00","created_by":"refinery"}],"ephemeral":true}
{"id":"bd-wisp-imu","title":"mol-witness-patrol","description":"Per-rig worker monitor patrol loop.\n\nThe Witness is the Pit Boss for your rig. You watch polecats, nudge them toward\ncompletion, verify clean git state before kills, and escalate stuck workers.\n\n**You do NOT do implementation work.** Your job is oversight, not coding.\n\n## Ephemeral Polecat Model\n\nPolecats are truly ephemeral - done at MR submission, recyclable immediately:\n\n```\nPolecat lifecycle: spawning → working → mr_submitted → nuked\nMR lifecycle:      created → queued → processed → merged (Refinery handles)\n```\n\nOnce a polecat's branch is pushed (cleanup_status=clean), the polecat can be\nnuked immediately. The MR continues independently in the Refinery. If conflicts\narise, Refinery creates a NEW conflict-resolution task for a NEW polecat.\n\n**Key principle**: Polecat lifecycle is separate from MR lifecycle.\n\n## Design Philosophy\n\nThis patrol follows Gas Town principles:\n- **Discovery over tracking**: Observe reality each cycle, don't maintain state\n- **Events over state**: POLECAT_DONE mail triggers immediate cleanup\n- **Ephemeral by default**: Clean polecats are nuked immediately, no waiting\n- **Cleanup wisps for exceptions**: Only created when intervention needed\n- **Task tool for parallelism**: Subagents inspect polecats, not molecule arms\n\n## Patrol Shape (Linear, Deacon-style)\n\n```\ninbox-check ─► process-cleanups ─► check-refinery ─► survey-workers\n                                                            │\n         ┌──────────────────────────────────────────────────┘\n         ▼\n  check-timer-gates ─► check-swarm ─► ping-deacon ─► patrol-cleanup ─► context-check ─► loop-or-exit\n```\n\nNo dynamic arms. No fanout gates. No persistent nudge counters.\nState is discovered each cycle from reality (tmux, beads, mail).","status":"open","priority":2,"issue_type":"epic","created_at":"2026-02-12T08:52:15.903384199+11:00","updated_at":"2026-02-12T08:52:15.903384279+11:00","ephemeral":true}
{"id":"bd-wisp-j5h","title":"mol-refinery-patrol","description":"Merge queue processor patrol loop.\n\nThe Refinery is the Engineer in the engine room. You process polecat branches, merging them to main one at a time with sequential rebasing.\n\n**The Scotty Test**: Before proceeding past any failure, ask yourself: \"Would Scotty walk past a warp core leak because it existed before his shift?\"\n\n## Merge Flow\n\nThe Refinery receives MERGE_READY mail from Witnesses when polecats complete work:\n\n```\nWitness                    Refinery                      Git\n   │                          │                           │\n   │ MERGE_READY              │                           │\n   │─────────────────────────\u003e│                           │\n   │                          │                           │\n   │                    (verify branch)                   │\n   │                          │ fetch \u0026 rebase            │\n   │                          │──────────────────────────\u003e│\n   │                          │                           │\n   │                    (run tests)                       │\n   │                          │                           │\n   │                    (if pass)                         │\n   │                          │ merge \u0026 push              │\n   │                          │──────────────────────────\u003e│\n   │                          │                           │\n   │ MERGED                   │                           │\n   │\u003c─────────────────────────│                           │\n   │                          │                           │\n```\n\nAfter successful merge, Refinery sends MERGED mail back to Witness so it can\ncomplete cleanup (nuke the polecat worktree).\n\n## CRITICAL: Read Step Instructions Before Acting\n\nBefore executing ANY step, you MUST run `bd show \u003cstep-id\u003e` and read the full\ndescription. Steps contain **Config:** values that override default behavior.\nIf a config says to skip, you skip. If it specifies a command, you use that\nexact command — not your own assumption. Do NOT guess what a step requires\nbased on the step title or your role knowledge. The step description is the\nsource of truth.\n\n## Step Execution Order\n\nYou MUST process steps in strict DAG order. Walk through each step sequentially,\nunless you are explicitly told to skip to a step.","status":"hooked","priority":2,"issue_type":"epic","assignee":"frankentui/refinery","created_at":"2026-02-12T07:37:40.372321228+11:00","updated_at":"2026-02-12T07:37:40.713502195+11:00","ephemeral":true}
{"id":"bd-wisp-jvt","title":"mol-witness-patrol","description":"Per-rig worker monitor patrol loop.\n\nThe Witness is the Pit Boss for your rig. You watch polecats, nudge them toward\ncompletion, verify clean git state before kills, and escalate stuck workers.\n\n**You do NOT do implementation work.** Your job is oversight, not coding.\n\n## Ephemeral Polecat Model\n\nPolecats are truly ephemeral - done at MR submission, recyclable immediately:\n\n```\nPolecat lifecycle: spawning → working → mr_submitted → nuked\nMR lifecycle:      created → queued → processed → merged (Refinery handles)\n```\n\nOnce a polecat's branch is pushed (cleanup_status=clean), the polecat can be\nnuked immediately. The MR continues independently in the Refinery. If conflicts\narise, Refinery creates a NEW conflict-resolution task for a NEW polecat.\n\n**Key principle**: Polecat lifecycle is separate from MR lifecycle.\n\n## Design Philosophy\n\nThis patrol follows Gas Town principles:\n- **Discovery over tracking**: Observe reality each cycle, don't maintain state\n- **Events over state**: POLECAT_DONE mail triggers immediate cleanup\n- **Ephemeral by default**: Clean polecats are nuked immediately, no waiting\n- **Cleanup wisps for exceptions**: Only created when intervention needed\n- **Task tool for parallelism**: Subagents inspect polecats, not molecule arms\n\n## Patrol Shape (Linear, Deacon-style)\n\n```\ninbox-check ─► process-cleanups ─► check-refinery ─► survey-workers\n                                                            │\n         ┌──────────────────────────────────────────────────┘\n         ▼\n  check-timer-gates ─► check-swarm ─► ping-deacon ─► patrol-cleanup ─► context-check ─► loop-or-exit\n```\n\nNo dynamic arms. No fanout gates. No persistent nudge counters.\nState is discovered each cycle from reality (tmux, beads, mail).","status":"open","priority":2,"issue_type":"epic","assignee":"frankentui/witness","created_at":"2026-02-12T08:46:53.57799391+11:00","updated_at":"2026-02-12T08:49:22.577008839+11:00","ephemeral":true}
{"id":"bd-wisp-lrj","title":"Check timer gates for expiration","description":"Check for expired timer gates and escalate as needed.\n\nTimer gates are async wait conditions with a timeout. When the timeout expires,\nthe gate should be escalated to the overseer for human intervention.\n\n**Step 1: Run timer gate check**\n```bash\nbd gate check --type=timer --escalate\n```\n\nThis command:\n1. Finds all open gate issues with await_type=timer\n2. Checks if `now \u003e created_at + timeout`\n3. Escalates expired gates via `gt escalate` (HIGH severity)\n4. Reports summary of gate status\n\n**Step 2: Review output**\n\nIf expired gates were found and escalated:\n- The escalation creates an audit trail bead\n- Overseer will be notified via mail\n- Gate remains open until manually resolved\n\nIf no expired gates:\n- Continue patrol normally\n\n**Note**: Timer gates do NOT auto-close on expiration. They escalate.\nThis ensures human oversight of timeout conditions.\n\n**Parallelism**: This is a single command, no parallel execution needed.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-12T08:52:15.909935263+11:00","updated_at":"2026-02-12T08:52:15.909935323+11:00","dependencies":[{"issue_id":"bd-wisp-lrj","depends_on_id":"bd-wisp-imu","type":"parent-child","created_at":"2026-02-12T08:52:15.931956528+11:00","created_by":"frankentui/witness"},{"issue_id":"bd-wisp-lrj","depends_on_id":"bd-wisp-god","type":"blocks","created_at":"2026-02-12T08:52:15.961968317+11:00","created_by":"frankentui/witness"}],"ephemeral":true}
{"id":"bd-wisp-oow","title":"mol-witness-patrol","description":"Per-rig worker monitor patrol loop.\n\nThe Witness is the Pit Boss for your rig. You watch polecats, nudge them toward\ncompletion, verify clean git state before kills, and escalate stuck workers.\n\n**You do NOT do implementation work.** Your job is oversight, not coding.\n\n## Ephemeral Polecat Model\n\nPolecats are truly ephemeral - done at MR submission, recyclable immediately:\n\n```\nPolecat lifecycle: spawning → working → mr_submitted → nuked\nMR lifecycle:      created → queued → processed → merged (Refinery handles)\n```\n\nOnce a polecat's branch is pushed (cleanup_status=clean), the polecat can be\nnuked immediately. The MR continues independently in the Refinery. If conflicts\narise, Refinery creates a NEW conflict-resolution task for a NEW polecat.\n\n**Key principle**: Polecat lifecycle is separate from MR lifecycle.\n\n## Design Philosophy\n\nThis patrol follows Gas Town principles:\n- **Discovery over tracking**: Observe reality each cycle, don't maintain state\n- **Events over state**: POLECAT_DONE mail triggers immediate cleanup\n- **Ephemeral by default**: Clean polecats are nuked immediately, no waiting\n- **Cleanup wisps for exceptions**: Only created when intervention needed\n- **Task tool for parallelism**: Subagents inspect polecats, not molecule arms\n\n## Patrol Shape (Linear, Deacon-style)\n\n```\ninbox-check ─► process-cleanups ─► check-refinery ─► survey-workers\n                                                            │\n         ┌──────────────────────────────────────────────────┘\n         ▼\n  check-timer-gates ─► check-swarm ─► ping-deacon ─► patrol-cleanup ─► context-check ─► loop-or-exit\n```\n\nNo dynamic arms. No fanout gates. No persistent nudge counters.\nState is discovered each cycle from reality (tmux, beads, mail).","status":"open","priority":2,"issue_type":"epic","assignee":"frankentui/witness","created_at":"2026-02-12T08:49:17.901356773+11:00","updated_at":"2026-02-12T08:52:20.144864667+11:00","ephemeral":true}
{"id":"bd-wisp-tx3","title":"Ensure refinery is alive","description":"Ensure the refinery is alive and processing merge requests.\n\n**Step 1: Check refinery status and merge queue**\n```bash\ngt refinery status \u003crig\u003e\ngt mq list \u003crig\u003e\n```\n\nRefinery status shows: running/stopped and queue count.\n`gt mq list` shows actual MR beads waiting.\n\n**Step 2: Act on what you find**\n\nIf MRs in queue AND refinery not running:\n```bash\ngt nudge \u003crig\u003e/refinery \"MRs waiting in queue. Please process.\"\n```\n\nIf MRs in queue AND refinery running but idle at prompt (check with `gt peek \u003crig\u003e/refinery 20`):\n```bash\ngt nudge \u003crig\u003e/refinery \"MR \u003cid\u003e has been waiting \u003cN\u003e minutes. Please process.\"\n```\n\nIf queue empty and refinery running: No action needed.\n\n**IMPORTANT**: Do NOT use `bd list --type=merge-request` — MRs live in the merge queue,\nnot in the beads issue tracker. Always use `gt mq list \u003crig\u003e` to check for pending work.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-12T08:52:15.908079256+11:00","updated_at":"2026-02-12T08:52:15.908079336+11:00","dependencies":[{"issue_id":"bd-wisp-tx3","depends_on_id":"bd-wisp-imu","type":"parent-child","created_at":"2026-02-12T08:52:15.922631802+11:00","created_by":"frankentui/witness"},{"issue_id":"bd-wisp-tx3","depends_on_id":"bd-wisp-ghk","type":"blocks","created_at":"2026-02-12T08:52:15.954892752+11:00","created_by":"frankentui/witness"}],"ephemeral":true}
{"id":"bd-wisp-yxc","title":"mol-witness-patrol","description":"Per-rig worker monitor patrol loop.\n\nThe Witness is the Pit Boss for your rig. You watch polecats, nudge them toward\ncompletion, verify clean git state before kills, and escalate stuck workers.\n\n**You do NOT do implementation work.** Your job is oversight, not coding.\n\n## Ephemeral Polecat Model\n\nPolecats are truly ephemeral - done at MR submission, recyclable immediately:\n\n```\nPolecat lifecycle: spawning → working → mr_submitted → nuked\nMR lifecycle:      created → queued → processed → merged (Refinery handles)\n```\n\nOnce a polecat's branch is pushed (cleanup_status=clean), the polecat can be\nnuked immediately. The MR continues independently in the Refinery. If conflicts\narise, Refinery creates a NEW conflict-resolution task for a NEW polecat.\n\n**Key principle**: Polecat lifecycle is separate from MR lifecycle.\n\n## Design Philosophy\n\nThis patrol follows Gas Town principles:\n- **Discovery over tracking**: Observe reality each cycle, don't maintain state\n- **Events over state**: POLECAT_DONE mail triggers immediate cleanup\n- **Ephemeral by default**: Clean polecats are nuked immediately, no waiting\n- **Cleanup wisps for exceptions**: Only created when intervention needed\n- **Task tool for parallelism**: Subagents inspect polecats, not molecule arms\n\n## Patrol Shape (Linear, Deacon-style)\n\n```\ninbox-check ─► process-cleanups ─► check-refinery ─► survey-workers\n                                                            │\n         ┌──────────────────────────────────────────────────┘\n         ▼\n  check-timer-gates ─► check-swarm ─► ping-deacon ─► patrol-cleanup ─► context-check ─► loop-or-exit\n```\n\nNo dynamic arms. No fanout gates. No persistent nudge counters.\nState is discovered each cycle from reality (tmux, beads, mail).","status":"hooked","priority":2,"issue_type":"epic","assignee":"frankentui/witness","created_at":"2026-02-12T08:52:15.474117517+11:00","updated_at":"2026-02-12T08:52:20.402889087+11:00","ephemeral":true}
{"id":"bd-yil","title":"Task 3.1: Add parameter support to command palette","description":"Parse usage/options from CliCommand, show parameter prompts inline, auto-complete rig/agent/bead names.","status":"closed","priority":1,"issue_type":"task","owner":"core@startupfactory.network","created_at":"2026-02-12T08:30:58.409210691+11:00","created_by":"mayor","updated_at":"2026-02-12T08:54:47.002464297+11:00","closed_at":"2026-02-12T08:54:47.002464297+11:00","close_reason":"Args input mode added to command palette - Enter on command shows input bar, type args and Enter to execute"}
{"id":"bd-z61","title":"Task 3.2: Add quick-action commands","description":"Pre-built palette entries: gt sling, gt crew start/stop, gt polecat nuke, gt nudge, gt mail send, bd create.","status":"closed","priority":2,"issue_type":"task","owner":"core@startupfactory.network","created_at":"2026-02-12T08:31:01.903366982+11:00","created_by":"mayor","updated_at":"2026-02-12T08:44:51.238639331+11:00","closed_at":"2026-02-12T08:44:51.238639331+11:00","close_reason":"13 quick-action commands added to palette, compilation fixed"}
{"id":"bd-zgv","title":"Event Feed: remove fake demo data, use only real events","status":"closed","priority":1,"issue_type":"bug","owner":"core@startupfactory.network","created_at":"2026-02-12T09:10:07.37655434+11:00","created_by":"mayor","updated_at":"2026-02-12T09:11:20.006394136+11:00","closed_at":"2026-02-12T09:11:20.006394136+11:00","close_reason":"Removed all fake event generation (30 demo events on startup, tick-based synthetic events, hardcoded ACTORS/templates/det_hash). Event feed now exclusively shows real events from EventTailer and status deltas. Smart categorization via EventCategory::from_event_type. Shows 'Waiting for events...' when empty."}
